
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yo Nutri! – Product Detail</title>
  <link rel="stylesheet" href="style.css">

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
 <!-- <style>

html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  width: 100%;
}


* {
  box-sizing: border-box;
  max-width: 100%;
}
</style>  -->

  <style>
    :root{ --border:#e9e9e9; --green:#138a00; --brand:#3e2723; --cta:#ffb300; }

    *{box-sizing:border-box;margin:0;padding:0}
    body{background:#3c2821;
      /* color:#fff; */
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

    /* Header */
    .yonutri-navbar{position:sticky;top:0;z-index:999;background:#3c2821;box-shadow:0 2px 8px rgba(0,0,0,.12);height:105px}
    .yonutri-navbar .navbar-top{max-width:1500px;margin:auto;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}
    .nav-left .shop-link,.nav-right a{color:#fff;text-decoration:none;font-size:1.1rem}
    .nav-right{display:flex;gap:1.4rem;align-items:center}
    .nav-logo{width:80px;height:80px;border-radius:50%;object-fit:cover}
    .search-bar{position:fixed;top:-105px;left:0;width:100%;height:105px;background:#fff;padding:20px;display:flex;justify-content:center;align-items:center;box-shadow:0 4px 10px rgba(0,0,0,.1);transition:top .4s ease;z-index:2000}
    .search-bar.show{top:0}
    .search-bar input{width:50%;padding:10px;border:1px solid #000;font-size:16px}
    .close-search{font-size:24px;cursor:pointer;margin-left:15px}
    .yonutri-navbar.hidden { transform: translateY(-100%); }

    /* Shop panel */
    
    /* Drawer */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);opacity:0;pointer-events:none;transition:.25s;z-index:1001}
    .overlay.active{opacity:1;pointer-events:auto}
    .cart{position:fixed;top:0;right:0;bottom:0;width:392px;max-width:88vw;background:#fff;transform:translateX(110%);transition:.3s ease;z-index:1002;display:grid;grid-template-rows:auto 1fr auto;border-left:1px solid var(--border);color:#1c1c1c}
    .cart.active{transform:translateX(0)}
    .cart-hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
    .cart-title{display:flex;align-items:center;gap:10px;font-weight:800;font-size:16px}
    .cart-close{cursor:pointer;font-size:18px;color:#222}
    .cart-bd{padding:14px 14px 0;overflow:auto;scrollbar-width:none;-ms-overflow-style:none}
    .cart-bd::-webkit-scrollbar{width:0;height:0}
    .c-items{display:flex;flex-direction:column;gap:12px;margin-bottom:12px}
    .c-row{display:grid;grid-template-columns:64px 1fr auto;gap:12px;align-items:start;background:#fff;border:1px solid #ededed;border-radius:16px;padding:12px;box-shadow:0 1px 0 rgba(0,0,0,.03) inset}
    .c-thumb{width:64px;height:64px;object-fit:contain;background:#FFB347;border-radius:12px}
    .c-title{font-weight:800;font-size:14px;line-height:1.3;margin:0;max-width:220px}
    .c-sub{font-size:12px;color:#6f6f6f;margin:4px 0 8px}
    .c-right{display:flex;align-items:center;gap:10px}
    .c-prices{display:flex;flex-direction:column;align-items:flex-end;min-width:72px}
    .c-price{font-weight:900;font-size:14px}
    .c-trash{border:0;background:transparent;color:#b5b5b5;width:30px;height:30px;border-radius:8px;cursor:pointer}
    .c-trash:hover{color:#222}
    .qty{display:flex;align-items:center;border:1.5px solid #121212;border-radius:9999px;padding:4px;background:#fff;height:40px}
    .qty .dec,.qty .inc{border:0;cursor:pointer;height:32px;min-width:40px;border-radius:10px;font-weight:900;font-size:16px;display:flex;align-items:center;justify-content:center}
    .qty .dec{background:#e9e9e9;color:#222}
    .qty .inc{background:#3e2723;color:#fff}
    .qty.is-single .dec{background:#efefef;color:#9a9a9a}
    .qty .count{width:33px;text-align:center;font-weight:700;font-size:14px}

    /* Drawer sections */
    .cart-section{border-top:1px solid var(--border);margin:14px -14px 0;padding:10px 14px}
    .sec-title{font-weight:800;font-size:14px;margin:0 0 12px}

    /* Offers & Rewards band */
    .coupon-band{display:flex;align-items:center;justify-content:space-between;gap:10px;border:1px solid #e7efe7;border-radius:14px;padding:14px 16px;background:#fff}
    .coupon-left{display:flex;align-items:center;gap:10px}
    .coupon-left .icon{width:22px;height:22px;display:grid;place-items:center;border-radius:9999px;background:#e9f7ea;color:var(--green)}
    .coupon-text{display:flex;flex-direction:column;line-height:1.2}
    .coupon-main{font-weight:800;color:var(--green);font-size:14px}
    .coupon-sub{font-size:12px;color:#666}
    .coupon-apply{padding:6px 12px;border:1px solid #cfd8cf;border-radius:12px;background:#fff;font-weight:800;font-size:12px;cursor:pointer}
    .applied-row{display:flex;align-items:center;gap:8px;color:#0a7f00;font-weight:700;font-size:13px;margin-top:10px}
    .applied-row i{color:#0a7f00}

    /* Special Offers shelf */
    .offers-wrap{border:1px solid var(--border);border-radius:14px;padding:12px;background:#fff}
    .offers-head{font-weight:800;color:#118600;margin:0 0 10px}
    .offer-list{display:flex;gap:12px;overflow:auto;padding-bottom:6px;scroll-snap-type:x mandatory}
   
.offer-card{
    flex:0 0 150px; border:1px solid #e9e9e9; border-radius:14px; padding:10px;
    display:flex; flex-direction:column; gap:8px; background:#fff; 
    scroll-snap-align:start;overflow: visible
  }
  .offer-thumb{ width:100%; aspect-ratio: 1 / 1;   height: auto; display: block;
  padding: 8px; 
     object-fit:contain;
      /* background:#f7f7f7;  */
      border-radius:10px }
      
     @supports not (aspect-ratio: 1 / 1) {
  .offer-thumb{ height: 120px; }   /* was 76px — give more headroom */
}


    .offer-title{font-size:12px;font-weight:800;line-height:1.2;min-height:32px;color:#222}
    .offer-price{display:flex;align-items:center;justify-content:space-between;font-size:12px}
    .offer-old{text-decoration:line-through;color:#777}
    .offer-cta,.offer-qty{height:32px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:900;cursor:pointer}
    .offer-cta{border:1px solid #2b8a00;background:#fff}
    .offer-qty{border:1.5px solid #121212;gap:6px;padding:0 4px}
    .offer-qty .dec,.offer-qty .inc{height:26px;min-width:28px;border:0;border-radius:8px;font-weight:900;font-size:14px;display:flex;align-items:center;justify-content:center;cursor:pointer}
    .offer-qty .dec{background:#e9e9e9}
    .offer-qty .inc{background:#16271b;color:#fff}
    .offer-qty .count{min-width:20px;text-align:center;font-weight:800}

    .cart-ft{border-top:1px solid var(--border);background:#fff;padding:12px 14px;display:grid;gap:10px}
    .total-line{display:flex;align-items:center;justify-content:space-between}
    .checkout{width:100%;background:#FFA500;color:#fff;border:none;border-radius:9999px;padding:12px 16px;font-weight:900;cursor:pointer}
    .secured{text-align:center;font-size:11px;color:#666}

    /* PDP layout */
  /* PDP layout – keep a right gutter without overflowing the viewport */
.container{
  max-width: 1200px;
  width: 100%;
  margin-left: 0;
  margin-right: auto;
  padding: 20px;

  /* Only add a right gutter when there’s room for it, otherwise 0 */
  padding-right: clamp(0px, calc(100vw - 1200px), 420px);

  display: flex;
  gap: 30px;
}

    .left-section{display:flex;align-items:flex-start;gap:15px}
    .image-gallery{position:relative}
    .main-image{position:relative;width:500px;height:500px;overflow:hidden;border-radius:8px}
.main-image img{width:100%;height:100%;object-fit:contain}
    .zoom-icon{position:absolute;top:10px;left:10px;background:#fff;border-radius:50%;padding:8px;cursor:pointer;z-index:2;color:#3c2821}
    .slider-dots{text-align:center;margin-top:10px}
    .dot{height:10px;width:10px;margin:5px;background:#bbb;border-radius:50%;display:inline-block;cursor:pointer}
    .dot.active{background:#555}

    /* Icon column */
    .icon-column{display:flex;flex-direction:column;gap:18px;height:500px;align-items:center}
    .icon-box{
      background:#f4dec4;color:#3c2821;border-radius:8px;
      height:150px;width:180px;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      text-align:center;padding:10px;
    }
    .icon-box i{font-size:56px;line-height:1;display:block;margin-bottom:10px;}
    .icon-box p{margin:6px 0 0;line-height:1.2;font-size:14px;text-align:center;}

    .right-section{
      color:#fff;
      flex:1;min-width:600px}
    .breadcrumb{font-size:14px;margin-bottom:10px;text-decoration:underline}
    .breadcrumb a{color:#fff;text-decoration:none}
    .product-title{font-size:34px;font-weight:900;margin-bottom:15px}
    .price-section{display:flex;align-items:baseline;gap:10px}
    .current-price{font-size:34px;font-weight:900}
    .features{list-style:disc;margin:14px 0 0 22px}
    .offer-box{border:2px solid #ffb300;padding:10px;margin:20px 0;background:#3c2821;border-radius:6px;display:flex;gap:10px}
    .offer-icon{font-size:34px;color:#ffb300;margin:4px 10px 0}
    .purchase-section{display:flex;align-items:center;gap:10px}

    /* Qty=0 neutral */
    .quantity-selector{display:flex;align-items:center;border:1px solid #e0e0e0;border-radius:20px;overflow:hidden;background:#fff}
    .qty-btn{width:45px;height:40px;border:none;cursor:pointer;font-size:18px;background:#e9e9e9;color:#333}
    #quantity{width:48px;text-align:center;border:none;font-size:16px;outline:none;background:#fff;color:#333}
    .quantity-selector.is-zero .qty-btn{background:#ededed;color:#666}
    .quantity-selector.is-zero #quantity{color:#666}
    .add-to-cart{padding:10px 20px;background:var(--cta);border:none;cursor:pointer;font-weight:900;border-radius:20px;min-width:320px;color:#3e2723}

    /* ---------- FBT ---------- */
/* ---------- FBT (2-up carousel with arrows) ---------- */
:root{
  --fbt-gap:14px;
  --fbt-plus-w:44px;
  --fbt-brand:#3e2723;
  --fbt-cta:#ffb300;
}

.fbt{margin-top:2rem}
.fbt .fbt__heading{
  display:flex;align-items:center;gap:10px;
  color:#fff;font-weight:800;margin-bottom:10px
}
.fbt .fbt__heading i{color:#fff}

.fbt__box{
  position:relative;background:#fff;color:#1c1c1c;
  border:1px solid #ececec;border-radius:12px;
  padding:14px 48px 0;box-shadow:0 1px 3px rgba(0,0,0,.06);
}

/* track */
.fbt__track{
  display:flex;align-items:stretch;gap:var(--fbt-gap);
  overflow-x:auto;overflow-y:hidden;
  padding-inline:var(--fbt-gap);
  scroll-behavior:smooth;
  scroll-snap-type:x mandatory;
  scrollbar-width:none;
}
.fbt__track::-webkit-scrollbar{display:none}

/* card width is injected via JS with --card-w */
.fbt__item{
  position:relative;background:#fff;border:1px solid #ededed;border-radius:12px;
  padding:14px;display:flex;flex-direction:column;align-items:center;text-align:center;
  flex:0 0 var(--card-w, 320px);
  scroll-snap-align:start;
}
.fbt__img{width:140px;height:140px;border-radius:10px;background:#f7f7f7;display:flex;align-items:center;justify-content:center;overflow:hidden;margin:6px 0 10px}
.fbt__img img{max-width:100%;max-height:100%;object-fit:contain}
.fbt__check{
  position:absolute;top:10px;left:10px;appearance:none;width:18px;height:18px;cursor:pointer;
  border:2px solid var(--fbt-brand);border-radius:4px;background:#fff;display:inline-block
}
.fbt__check:checked{background:var(--fbt-brand);box-shadow:inset 0 0 0 4px #fff}
.fbt__title{margin:0 0 8px;font-weight:800;font-size:14px;color:#222;line-height:1.25}
.fbt__price{font-weight:900;color:#222}

/* dashed plus tile between cards */
.fbt__plus{
  flex:0 0 var(--fbt-plus-w);height:44px;align-self:center;display:grid;place-items:center;
  border:2px dashed #e3e3e3;border-radius:10px;font-weight:900;color:var(--fbt-brand);
  scroll-snap-align:start;
}

/* arrows */
.fbt__nav{
  position:absolute;top:50%;transform:translateY(-50%);
  width:36px;height:36px;border-radius:9999px;border:1px solid #e3e3e3;background:#fff;
  display:grid;place-items:center;color:var(--fbt-brand);cursor:pointer;z-index:1;box-shadow:0 2px 10px rgba(0,0,0,.08)
}
.fbt__nav.is-prev{left:8px}
.fbt__nav.is-next{right:8px}
.fbt__nav:disabled{opacity:.35;cursor:default}

/* CTA */
.fbt__cta{
  display:block;width:100%;margin:14px 0 0;padding:12px 14px;
  background:var(--fbt-cta);color:var(--fbt-brand);font-weight:900;border:0;border-radius:0 0 12px 12px;cursor:pointer
}





/* Phones: swipe, hide arrows, single wide cards */
@media (max-width:768px){
  .fbt-box{padding:14px 14px 0}
  /* Override to show slide buttons on mobile */
  .fbt-nav{display:grid !important;}
  .fbt-body{overflow-x:auto}
  .fbt-item{flex:0 0 82%}
  .fbt-img{width:110px;height:110px}
  .fbt-cta{border-radius:10px}
}

    /* Marquee basics (UNCHANGED) */
/* ============================
   PHONES (≤768px)
   ============================ */
@media (max-width: 768px){

  /* Header / search */
  .yonutri-navbar{ height:64px; }
  .yonutri-navbar .navbar-top{ padding:.5rem .9rem; }
  .nav-logo{ width:52px; height:52px; }
  .nav-right{ gap:.9rem; }

  .search-bar{
    height:64px; top:-64px; padding:12px;
  }
  .search-bar.show{ top:0; }
  .search-bar input{ width:88%; }

  /* Cart → bottom sheet */
  /* .cart{
    inset:auto 0 0 0;          
    width:100vw; max-width:none;
    height:auto; right:auto;     
    transform:translateY(110%);
    border-left:0;
    border-top-left-radius:16px; border-top-right-radius:16px;
  } */
  .cart.active{ transform:translateY(0); }

  .cart-hd{ padding:12px 14px; }
  .cart-bd{ padding:12px 12px 0; }

  .c-row{
    grid-template-columns:56px 1fr;  /* thumb | middle; buttons move below */
    align-items:center; gap:10px;
  }
  .c-thumb{ width:56px; height:56px; }
  .c-title{ max-width:100%; font-size:13px; }
  .c-right{
    grid-column:1 / -1;            /* full width under title */
    justify-content:space-between;
    margin-top:6px;
  }
  .c-prices{ min-width:auto; }
  .qty{ height:36px; }
  .qty .dec, .qty .inc{ height:28px; min-width:34px; }
  .cart-ft{ padding-bottom:calc(12px + env(safe-area-inset-bottom, 0)); }

  /* PDP stack */
  .container{

    max-width:480px;
    margin:0 auto;
    padding:12px 14px;            /* side gutter */
    padding-right:14px;           /* remove big desktop right gutter */
    display:block;                /* stop the side-by-side layout */
  }
  .left-section{ flex-direction:column; gap:12px; }
  .main-image{
    width:100%; height:auto; aspect-ratio:1/1; border-radius:8px;
  }
  .main-image img{ object-fit:contain; }

  /* Feature tiles → horizontal scroller */
  .icon-column{
    position:static; flex-direction:row; height:auto; gap:12px;
    overflow-x:auto; padding-bottom:6px;
    -webkit-overflow-scrolling:touch; scrollbar-width:thin;
  }
  .icon-column::-webkit-scrollbar{ height:6px; }
  .icon-box{ flex:0 0 120px; height:110px; border-radius:12px; }

  .right-section{ width:100%; min-width:0; margin-top:14px; }
  .product-title{ font-size:22px; line-height:1.25; margin:6px 0 8px; }
  .current-price{ font-size:24px; }
  .features{ font-size:13px; }

  .purchase-section{ gap:10px; flex-wrap:wrap; }
  .quantity-selector{ height:40px; }
  .qty-btn{ width:40px; height:36px; }
  #quantity{ width:42px; }
  .add-to-cart{
    width:100%; min-width:0; height:44px;
    border-radius:9999px; font-weight:900; font-size:14px;
  }

  /* FBT */
  .fbt-body{ grid-template-columns:1fr; gap:12px; }
  .fbt-plus{ display:none; }
  .fbt-img{ width:110px; height:110px; }
  .fbt-cta{ width:100%; margin:12px 0 0; border-radius:10px; }

  /* Marquee */
  .marquee-alt__content{ font-size:1rem; gap:1.25rem; }
}

/* ============================
   TABLETS (769–1024px)
   ============================ */
@media (min-width: 769px) and (max-width: 1024px){

  /* Header / search */
  .yonutri-navbar{ height:88px; }
  .yonutri-navbar .navbar-top{ padding:.75rem 1.25rem; }
  .nav-logo{ width:64px; height:64px; }

  .search-bar{ height:88px; top:-88px; }
  .search-bar input{ width:66%; }

  /* Cart panel width */
  .cart{ width:min(420px, 92vw); }

  /* PDP tighten gutter & sizes */
  .container{
    padding:20px;
    padding-right:clamp(20px, 5vw, 100px); /* even smaller right gutter to prevent cut-off */
  }
  .main-image{ width:380px; height:380px; } /* slightly smaller image */
  .icon-column{ height:380px; }
  .icon-box{ width:160px; height:120px; }

  .right-section{ min-width:400px; } /* reduced min-width */
  .product-title{ font-size:26px; }
  .current-price{ font-size:26px; }

  .fbt-img{ width:110px; height:110px; }
}

/* ============================
   SMALLER TABLETS (769–900px)
   ============================ */
@media (min-width: 769px) and (max-width: 900px){

  /* Stack layout for smaller tablets */
  .container{
    display: block !important; /* stack left and right sections */
    padding: 15px;
    padding-right: 15px;
  }
  .left-section{
    text-align: center;
    margin-bottom: 20px;
  }
  .main-image{
    width: 100%;
    max-width: 400px;
    height: auto;
    aspect-ratio: 1 / 1;
  }
  .icon-column{
    flex-direction: row;
    height: auto;
    gap: 15px;
    justify-content: center;
  }
  .icon-box{
    width: 120px;
    height: 100px;
  }
  .right-section{
    width: 100%;
    min-width: 0;
  }
  .product-title{ font-size: 24px; }
  .current-price{ font-size: 24px; }
  .purchase-section{
    flex-direction: column;
    align-items: center;
    gap: 15px;
  }
  .add-to-cart{
    width: 100%;
    max-width: 300px;
  }
}


/* Hamburger button */
.hamburger{ background: none;border:0;font-size:22px;cursor:pointer; }
/* Make sizing predictable so columns line up perfectly */
*, *::before, *::after { box-sizing: border-box; }

/* ===== Shop Drawer (mobile sheet) =============================== */
:root{
  --sheet-top: 64px;        /* JS will update this to header height */
  --gutter: 12px;           /* side margin on phones */
  --sheet-radius: 16px;
  --ink: #2b1e17;
}

/* Drawer container */
.shop-drawer{
  position: fixed;
  left: var(--gutter);
  right: var(--gutter);
  top: var(--sheet-top);                     /* sits right under header */
  width: auto;
  max-width: 420px;
  margin: 0 auto;
  background:#fff;
  border-radius: var(--sheet-radius);
  box-shadow: 0 10px 28px rgba(0,0,0,.18);
  z-index: 1200;

  display:flex;
  flex-direction:column;
  overflow:hidden;

  /* hidden (closed) */
  transform: translateY(calc(-100% - 12px));
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition:
    transform .32s ease,
    opacity .28s ease,
    visibility 0s linear .32s;
}

/* open state */
.shop-drawer.open{
  transform: translateY(0);
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transition:
    transform .32s ease,
    opacity .28s ease,
    visibility 0s;
}

/* Header row */
.shop-drawer-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 14px;
  border-bottom:1px solid #eee;
  background:#fff;
}
.shop-drawer-header h4{
  margin:0;
  font:700 13px/1.1 Montserrat, Inter, system-ui;
  letter-spacing:.35px;
  color:var(--ink);
  text-transform:uppercase;
}
.shop-drawer-header .fa-xmark{
  cursor:pointer;
  font-size:18px;
  color:var(--ink);
}

/* Body grid (always 2-up for consistency) */
.shop-drawer-body{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap:12px;
  padding:12px 12px 16px;
}

/* Category card */
.shop-drawer .category-item{
  position:relative;
  display:block;
  min-height:84px;
  padding:12px 76px 12px 12px;  /* room for right image */
  background:#f3ecdd;
  border:1px solid #e9e0cf;
  border-radius:14px;
  box-shadow:0 1px 0 rgba(0,0,0,.04) inset;
  color:var(--ink);
  text-decoration:none;
  transition:transform .06s ease, background .18s ease;
}

.shop-drawer .category-item:hover{ background:#efe6d3; }
.shop-drawer .category-item:active{ transform:scale(.995); }

/* Label (wrap to two lines; never clipped) */
.shop-drawer .category-item span{
  display:block;
  font:700 12.5px/1.2 Montserrat, Inter, system-ui;
  color:var(--ink);
  overflow:hidden;
  display:-webkit-box;
  /* -webkit-line-clamp:2; */
  -webkit-box-orient:vertical;
}

/* Small image bottom-right */
.shop-drawer .category-item img{
  position:absolute;
  right:10px;
  bottom:10px;
  width:56px; height:56px;
  object-fit:contain;
  background:#fff;
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,.12);
  outline:1px solid #eee;
}

/* Overlay (under sheet, above site) */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  opacity:0;
  visibility:hidden;
  pointer-events:none;
  transition:opacity .25s ease, visibility .25s ease;
  z-index:1190;
}

.overlay.show{
  opacity:1;
  visibility:visible;
  pointer-events:auto;
}

/* Body scroll lock helper (your JS toggles .modal-open) */
html.modal-open, body.modal-open{ height:100%; overflow:hidden; }

/* Slightly wider gutters on small tablets */
@media (min-width:480px){
  :root{ --gutter:16px; }
}
/* Make sure desktop hamburger stays hidden */
@media (min-width: 769px){ .hamburger{ display:none !important; } }
/* Desktop: SHOP text visible, hamburger hidden */
@media (min-width: 769px) {
  .nav-left .shop-link { display: inline-block; color: #fff; text-decoration: none; }
  .hamburger { display: none; }
}

/* Mobile: hamburger visible, SHOP text hidden */
@media (max-width: 768px) {
  .nav-left .shop-link { display: none; }
  .hamburger { display: inline-block; }
}

.hamburger{
  display:inline-block;
  background:none; border:0; cursor:pointer;
  color:#fff;          /* adjust to your header color */
  text-align:center;   /* center the text under icon */
  line-height:1.1;
  font-weight:800;
  font-size:10px;      /* label size */
  letter-spacing:.4px;
  padding:6px 8px;
}

.hamburger i{
  display:block;       /* this forces the next text onto a new line */
  font-size:20px;
  line-height:1;
  margin-bottom:3px;
}

























  </style>
</head>
<body>
  <!-- Header -->
  <header class="yonutri-navbar">
    <div class="navbar-top">
      <div class="nav-left"><a href="#" class="shop-link"><i class="fas fa-arrow-up-right-from-square"></i> SHOP</a>
                    <button id="hamburgerBtn" class="hamburger"><i class="fas fa-bars"></i>MENU</button>

      </div>
      <div class="nav-center"><a href="index.html" class="logo-link"><img src="images/WhatsApp Image 2025-08-08 at 9.47.38 AM.jpeg" alt="Yo Nutri Logo" class="nav-logo protect-copy" /></a></div>
      <div class="nav-right">
        <a href="#" class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></a>
        <a href="login.html"><i class="fa-solid fa-user"></i></a>
        <a href="#" id="cartIcon">CART <i class="header-icon fa-solid fa-cart-shopping"></i></a>
      </div>
      <div class="search-bar" id="searchBar"><input type="text" placeholder="Search" /><span class="close-search" id="closeSearch">&times;</span></div>
    </div>
  </header>

  <!-- Shop panel -->
  <div class="shop-panel" id="shopPanel">
    <div class="shop-panel-content">
      <a href="#" class="shop-link"><div class="shop-sidebar"><h5>SHOP BY CATEGORY</h5></div></a>
      <div class="category-grid">
        <a href="index.html" class="shop-link"><div class="category-item"><span>New Launches & Offers</span><img src="images/chocolate1.png" alt="image" class="protect-copy"></div></a>
        <a href="index.html" class="shop-link"><div class="category-item"><span>All Products</span><img src="images/image (2).png" alt="image" class="protect-copy"></div></a>
        <a href="index.html" class="shop-link"><div class="category-item"><span>Protein</span><img src="images/chocolate6.jpg" alt="image" class="protect-copy"></div></a>
        <a href="index.html#love-choco" class="shop-link"><div class="category-item"><span>Bars</span><img src="images/roasted6.jpg" alt="image" class="protect-copy"></div></a>
        <a href="index.html#yo-products" class="shop-link"><div class="category-item"><span>All Peanut Butter</span><img src="images/CREAMY_Dark_Chocolate-removebg-preview.png" alt="image" class="protect-copy"></div></a>
        <a href="index.html#yo-products" class="shop-link"><div class="category-item"><span>Peanut Butter Creamy</span><img src="images/CREAMY_Dates-removebg-preview.png" alt="image" class="protect-copy"></div></a>
        <a href="index.html#crunchy" class="shop-link"><div class="category-item"><span>Peanut Butter Crunchy</span><img src="images/CRUNCHY_Dark_Chocolate-removebg-preview.png" alt="image" class="protect-copy"></div></a>
        <a href="index.html#yo-products" class="shop-link"><div class="category-item"><span>Protein Bundle</span><img src="images/chocolate7.jpg" alt="image" class="protect-copy"></div></a>
        
      </div>
    </div>
  </div>



  <!-- Shop Drawer -->
<aside class="shop-drawer" id="shopDrawer">
  <div class="shop-drawer-header">
    <h4>SHOP BY CATEGORY</h4>
    <i class="fa-solid fa-xmark" id="closeShopDrawer"></i> 
  </div>
  <div class="shop-drawer-body">
    <a href="#yn-love" class="category-item">
      <img src="images/image (1).png" alt="image" class="protect-copy">
      <span>New Launches & Offers</span>
    </a>
    <a href="" class="category-item">
      <img src="images/image (2).png" alt="image" class="protect-copy">
      <span>All Products</span>
    </a>
    <a href="" class="category-item">
      <img src="images/chocolate6.jpg" alt="image" class="protect-copy">
      <span>Protein</span>
    </a>
    <a href="#yn-love" class="category-item">
      <img src="images/roasted6.jpg" alt="image" class="protect-copy">
      <span>Bars</span>
    </a>
    <a href="#yn-love" class="category-item">
      <span>All Peanut Butter</span><img src="images/CREAMY_Dark_Chocolate-removebg-preview.png" alt="image" class="protect-copy">
    </a>
    <a href="#yn-love" class="category-item">
      <span>Protein Bundle</span><img src="images/chocolate7.jpg" alt="image" class="protect-copy">
    </a>
    <a href="#yn-love" class="category-item"><span>Peanut Butter Creamy</span>
      <img src="images/CREAMY_Dates-removebg-preview.png" alt="image" class="protect-copy"></a>
        <a href="#yo-products" class="category-item"><span>Peanut Butter Crunchy</span>
    </a>

  </div>
</aside>
<!-- Overlay (ADD THIS) -->
<div class="overlay" id="overlay" tabindex="-1" aria-hidden="true"></div>








  <!-- Cart Drawer -->
  <aside class="cart" id="cart">
    <div class="cart-hd">
      <div class="cart-title"><i class="fa-solid fa-cart-shopping"></i><span id="cartTitle">Your cart · 0 item</span></div>
      <i class="fa-solid fa-xmark cart-close" id="closeCart" title="Close"></i>
    </div>
    <div class="cart-bd">
      <div class="c-items" id="cartItems"></div>

      <div class="cart-section">
        <div class="sec-title">Apply Coupon</div>
        <div class="coupon-form" style="display: flex; gap: 10px;">
          <input type="text" id="couponInput" placeholder="Enter coupon code" style="flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 8px;">
          <button id="applyCouponBtn" class="coupon-apply" type="button">Apply</button>
        </div>
        <div id="couponMessage" style="margin-top: 10px; color: red; font-size: 12px;"></div>

        <div id="appliedRow" class="applied-row" style="display:none">
          <i class="fa-regular fa-circle-check"></i>
          <span><span id="appliedSavings">₹0</span> total savings</span>
          <button id="removeCouponBtn" class="coupon-apply" type="button">Remove</button>
        </div>
      </div>

      <div class="cart-section">
        <div class="sec-title">Available Coupons</div>
        <div id="couponScroller" style="display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px;">
          <!-- Coupons will be dynamically inserted here -->
        </div>
      </div>

      <div class="cart-section">
        <div class="offers-wrap">
          <div class="offers-head">Special Offers For You</div>
          <div class="offer-list" id="offerList"></div>
        </div>
        <label class="applied-row" style="margin-top:10px;color:#444;font-weight:600">
          <input type="checkbox" checked style="accent-color:#0a7f00;margin-right:8px"> Keep me posted about sales and offers
        </label>
      </div>
    </div>

    <div class="cart-ft">
      <div class="total-line">
        <div class="total-left">
          <strong id="totalRupees">₹0</strong>
          <small>Estimated total</small>
        </div>
      </div>
      <a href="checkout.html">

       <button id="checkoutBtn" class="checkout" type="button">Checkout</button>
      </a>
      
      
    </div>
  </aside>

  <!-- PRODUCT DETAIL -->
  <div class="container" id="pdp" data-sku="dc-peanut-350" data-grams="350 gms" data-price="299">
    <div class="left-section">
      <div class="image-gallery">
        <div class="main-image">
          <img src="images/CREAMY_Dark_Chocolate-removebg-preview.png" alt="Product" id="product-image" class="protect-copy">
          
          <div class="zoom-icon" title="Zoom In">&#128269;</div>
        </div>
        <div class="slider-dots" id="sliderDots"></div>
      </div>

      <!-- ICONS -->
      <div class="icon-column">
        <div class="icon-box"><i class="fa-solid fa-weight-hanging"></i><p>High protein per Jar</p></div>
        <div class="icon-box"><i class="fa-solid fa-cubes-stacked"></i><p>Cleanest protein source</p></div>
        <div class="icon-box"><i class="fa-solid fa-seedling"></i><p>Plant Based</p></div>
      </div>
    </div>

    <div class="right-section">
      <nav class="breadcrumb"><a href="index.html">Home</a> / <a href="#">Peanut Butter</a> / <span>Dark Chocolate Peanut Butter</span></nav>

      <h1 class="product-title" id="pdpTitle">Dark Chocolate Peanut Butter - Box of 350 g</h1>

      <div class="price-section">
        <h1 class="current-price">MRP: ₹<span id="pdpPrice">299</span></h1>
      </div>

      <div style="margin:10px 0 6px 0">
        <span style="border:2px solid #fff;padding:2px 6px;border-radius:4px;color:gold">★★★★★</span> 5/5
      </div>
      <div><em>Use within 6 months of date of manufacturing </div>

      <ul class="features">
        <li>No refined sugar</li>
        <li>No palm oil</li>
        <li>No artificial sweeteners </li>
        <li>No preservatives</li>
        <li>No emulsifier</li>
      </ul>

      <div class="offer-box">
        <span class="offer-icon"><i class="fa-solid fa-percent"></i></span>
        <div class="offer-text">
          <strong>Flat OFF + FREE offers on your way!</strong>
          <p>
Stay tuned for OFFERS and FREE gifts on our new launches for lunches and beyond! FREE surprise gift on your very first orders. No code needed</p>
        </div>
      </div>

      <!-- Qty & Add -->
      <div class="purchase-section">
        <div class="quantity-selector is-zero" id="pdpQtyWrap">
          <button class="qty-btn" id="minus">−</button>
          <input type="text" value="0" id="quantity" inputmode="numeric" pattern="\d*">
          <button class="qty-btn" id="plus">+</button>
        </div>
<button class="add-to-cart" id="pdpAdd">ADD TO CART</button>
      </div>

      <section class="fbt" id="fbt">
  <div class="fbt__heading">
    <i class="fa-solid fa-cart-shopping"></i>
    <span>FREQUENTLY BOUGHT TOGETHER</span>
  </div>

  <div class="fbt__box">
    <button class="fbt__nav is-prev" id="fbtPrev" aria-label="Previous">‹</button>

    <div class="fbt__track" id="fbtTrack">
      <!-- 1 -->
      <article class="fbt__item" data-sku="fbt-1" data-price="299">
        <input class="fbt__check" type="checkbox" aria-label="Select Creamy Peanut Butter – Dates">
        <div class="fbt__img">
          <img src="images/CREAMY_Dates-removebg-preview.png" alt="Creamy Peanut Butter – Dates">
        </div>
        <h4 class="fbt__title">Creamy Peanut Butter – Dates</h4>
        <div class="fbt__price">Rs. 299</div>
      </article>
      <div class="fbt__plus">+</div>

      <!-- 2 -->
      <article class="fbt__item" data-sku="fbt-2" data-price="299">
        <input class="fbt__check" type="checkbox" aria-label="Select Creamy Peanut Butter – Jaggery">
        <div class="fbt__img">
          <img src="images/CREAMY_Jaggery-removebg-preview.png" alt="Creamy Peanut Butter – Jaggery">
        </div>
        <h4 class="fbt__title">Creamy Peanut Butter – Jaggery</h4>
        <div class="fbt__price">Rs. 299</div>
      </article>
      <div class="fbt__plus">+</div>

      <!-- 3 -->
      <article class="fbt__item" data-sku="fbt-3" data-price="299">
        <input class="fbt__check" type="checkbox" aria-label="Select Creamy Peanut Butter – Unsweetened">
        <div class="fbt__img">
          <img src="images/CREAMY_Dark_Chocolate-removebg-preview.png" alt="Creamy Peanut Butter – Unsweetened">
        </div>
        <h4 class="fbt__title">Creamy Peanut Butter – Dark Chocolate</h4>
        <div class="fbt__price">Rs. 299</div>
      </article>
      <div class="fbt__plus">+</div>

      <!-- 4 -->
      <article class="fbt__item" data-sku="fbt-4" data-price="299">
        <input class="fbt__check" type="checkbox" aria-label="Select Crunchy Peanut Butter – Dark Chocolate">
        <div class="fbt__img">
          <img src="images/CRUNCHY_Dark_Chocolate-removebg-preview.png" alt="Crunchy Peanut Butter – Dark Chocolate">
        </div>
        <h4 class="fbt__title">Crunchy Peanut Butter – Dark Chocolate</h4>
        <div class="fbt__price">Rs. 299</div>
      </article>
      <div class="fbt__plus">+</div>

      <!-- 5 -->
      <article class="fbt__item" data-sku="fbt-5" data-price="299">
        <input class="fbt__check" type="checkbox" aria-label="Select Crunchy Peanut Butter – Dates">
        <div class="fbt__img">
          <img src="images/CRUNCHY_Dates-removebg-preview.png" alt="Crunchy Peanut Butter – Dates">
        </div>
        <h4 class="fbt__title">Crunchy Peanut Butter – Dates</h4>
        <div class="fbt__price">Rs. 299</div>
      </article>
      <div class="fbt__plus">+</div>

      <!-- 6 -->
      <article class="fbt__item" data-sku="fbt-6" data-price="299">
        <input class="fbt__check" type="checkbox" aria-label="Select Crunchy Peanut Butter – Unsweetened">
        <div class="fbt__img">
          <img src="images/CRUNCHY_Unsweetened-removebg-preview.png" alt="Crunchy Peanut Butter – Unsweetened">
        </div>
        <h4 class="fbt__title">Crunchy Peanut Butter – Unsweetened</h4>
        <div class="fbt__price">Rs. 299</div>
      </article>
      <div class="fbt__plus">+</div>

      <!-- 7 -->
      <article class="fbt__item" data-sku="fbt-7" data-price="299">
        <input class="fbt__check" type="checkbox" aria-label="Select Creamy Peanut Butter – Dark Chocolate">
        <div class="fbt__img">
          <img src="images/CRUNCHY_Jaggery-removebg-preview.png" alt="Creamy Peanut Butter – Dark Chocolate">
        </div>
        <h4 class="fbt__title">Crunchy Peanut Butter – Jaggery</h4>
        <div class="fbt__price">Rs. 299</div>
      </article>
      <!-- (no trailing plus after the last card) -->
    </div>

    <button class="fbt__nav is-next" id="fbtNext" aria-label="Next">›</button>
    <button class="fbt__cta" id="fbtAdd">Add Selected Items to Cart</button>
  </div>
</section>

    </div>
  </div>

  <!-- Top marquee -->
  <section class="marquee" id="marquee">
    <div class="marquee__track" id="track">
      <div class="marquee__content" id="content">
        <span>WE BELIEVE IN KEEPING IT SIMPLE</span>
        <span>WE MAKE HEALTHY EASY</span>
        <span>ALL ABOARD THE YUM JOURNEY</span>
      </div>
    </div>
  </section>

  <!-- Footer (UNCHANGED) -->
  <footer class="custom-footer">
    <div class="footer-wrapper">
      <div class="footer-column logo-column">
        <div class="logo-circle">
          <img src="images/WhatsApp Image 2025-08-08 at 9.47.38 AM.jpeg" alt="Yo! Nutri Logo" class="protect-copy">
        </div>
        <p>WE’RE A NUTRITION-LED FOOD COMPANY THAT PRIDES ITSELF IN MAKING TASTY AND SIMPLE FOOD THAT’S GOOD FOR YOU. ALL WITHOUT ANY ARTIFICIAL COLOURS, CHEMICALS OR PRESERVATIVES. WE ONLY USE INGREDIENTS YOU CAN SEE AND TASTE. AND THAT’S WHY WE LET THEM DO THE TALKING.<br>GO ON AND TRY SOME!</p>
        <div class="social-icons">
          <a href="https://www.instagram.com/yonutri2024?igsh=amloYjAyaDNkOXpw"><i class="fab fa-instagram"></i></a>
          <a href="https://www.linkedin.com/company/yo-nutri-foods/?originalSubdomain=in"><i class="fab fa-linkedin-in"></i></a>
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
      <div class="footer-column">
        <h4>SHOP</h4>
        <ul>
          <li><a href="index.html">ALL PRODUCTS</a></li>
          <li><a href="index.html">NEW LAUNCHES & OFFERS</a></li>
          <li><a href="index.html#yo-products">PROTEIN</a></li>
          <li><a href="index.html#love-choco">BARS</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>QUICK LINKS</h4>
        <ul>
          <li><a href="ship.html">SHIPPING & DELIVERY</a></li>
          <li><a href="terms and conditions.html">TERMS AND CONDITIONS</a></li>
          <li><a href="privacy.html">PRIVACY POLICY</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>CONTACT US</h4>
        <p>PH: ‪+91-7386120893‬</p>
        <p>AVAILABLE MON TO FRI : 10 AM – 6 PM</p>
        <p>EMAIL: <a href="mailto:listen@yonutri.com" style="color: aliceblue;">listen@yonutri.com</a></p>
        <p>WE TRY TO RESPOND WITHIN 48 HOURS.</p>
      </div>
      <div class="footer-column">
        <h4>OUR STORY</h4>
        <ul><li><a href="our story.html">WHY WE EXIST?</a></li></ul>
      </div>
    </div>
    <hr><p class="quote">WE LET OUR INGREDIENTS DO THE TALKING!</p><hr>
    <div class="footer-payment-container">
    <p class="pay-text">Securely pay using:</p>
    <div class="payment-icons">
      <img src="images/mastercard.png" alt="Mastercard" class="protect-copy">
      <img src="images/visa.png" alt="Visa" class="protect-copy">
      <img src="images/paytm.png" alt="Paytm" class="protect-copy">
      <img src="images/upi.png" alt="UPI" class="protect-copy">
      <img src="images/gpay.png" alt="Google Pay" class="protect-copy">
      <img src="images/phonepe.png" alt="PhonePe" class="protect-copy">
    </div>

  </div>
    <div class="footer-bottom"><p>&copy; 2025 Yo! Nutri.</p></div>
  </footer>

  <!-- Marquee (UNCHANGED) -->
 <section class="marquee-alt" id="marqueeAlt">
    <div class="marquee-alt__track" id="trackAlt">
      <div class="marquee-alt__content" id="contentAlt">
        <span>IT’S SIMPLE UNTIL YOU MAKE IT COMPLICATED</span>
        <span>WE MAKE HEALTHY EASY</span>
        <span>WE BELIEVE IN KEEPING IT SIMPLE</span>
      </div>
    </div>
  </section>

<!-- 
<script>
(() => {
  const track = document.getElementById('fbtBody');
  const prev  = document.getElementById('fbtPrev');
  const next  = document.getElementById('fbtNext');
  if (!track || !prev || !next) return;

  const items = [...track.querySelectorAll('.fbt-item')];
  const visible = 2;                              // we show 2 cards at once
  // if (items.length <= visible){ prev.style.display='none'; next.style.display='none'; return; }
  let page=0, pages=1, padLeft=0;

  let first = 0;                                  // index of left-most visible card
  let offsets = [];

  const clamp = i => Math.max(0, Math.min(i, items.length - visible));

  const measure = () => {
    offsets = items.map(el => el.offsetLeft);     // align to card starts (plus sits between)
    sync();
  };

  const goTo = (i) => {
    first = clamp(i);
    track.scrollTo({ left: offsets[first], behavior: 'smooth' });
    sync();
  };

  const sync = () => {
    const sl = track.scrollLeft;
    let i = 0; while (i < offsets.length && offsets[i] <= sl + 1) i++;
    first = clamp(i - 1);
    prev.disabled = (first === 0);
    next.disabled = (first >= items.length - visible);
  };

  prev.addEventListener('click', () => goTo(first - 1));  // slide by 1 product
  next.addEventListener('click', () => goTo(first + 1));

  track.addEventListener('scroll', () => requestAnimationFrame(sync), { passive:true });
  window.addEventListener('resize', measure);

  measure();
})();
</script>

 -->



















<!-- 
<script>
(() => {
    const btn=document.getElementById('addSelectedFbt'); if (!btn) return;
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.fbt-item').forEach(card=>{
        const checked=card.querySelector('.fbt-check')?.checked; if(!checked) return;
        const title=card.querySelector('.fbt-title')?.textContent.trim()||'Product';
        const price=649; 
        // adjust if dynamic
        const img=card.querySelector('img')?.getAttribute('src')||'';
        const sku=card.dataset.sku||'fbt';
        window.addToCart && window.addToCart({ sku, grams:'FBT', title, price, img }, 1);
      });
    });
  })();
</script>
-->

<script src="./config.js">

</script>
  <!-- <script>console.log("API URL:", window.ENV.BACKEND_API);</script> -->





<script>
  const API = window.ENV.BACKEND_API

console.log("API URL:", API);



  
(() => {
  const track = document.getElementById('fbtTrack');
  const prev  = document.getElementById('fbtPrev');
  const next  = document.getElementById('fbtNext');
  const add   = document.getElementById('fbtAdd');
  if (!track || !prev || !next || !add) return;

  const items = [...track.querySelectorAll('.fbt__item')];
  const plus  = track.querySelector('.fbt__plus');
  const VISIBLE = 2;
  let page=0, pages=1, padLeft=0;

  // Persisted state
  const SELECTED_KEY='yonutri_fbt_selected_v1'; // which checkboxes are ticked (UI)
  const ADDED_KEY   ='yonutri_fbt_added_v1';    // which SKUs already added to cart

  const loadSet = (k) => { try { return new Set(JSON.parse(localStorage.getItem(k)||'[]')); } catch { return new Set(); } };
  const saveSet = (k,s) => { try { localStorage.setItem(k, JSON.stringify([...s])); } catch {} };

  const selected = loadSet(SELECTED_KEY);
  const added    = loadSet(ADDED_KEY);

  // Restore ticks
  items.forEach(card => {
    const sku = card.dataset.sku || '';
    const cb  = card.querySelector('.fbt__check');
    if (!cb) return;
    cb.checked = selected.has(sku);
    card.classList.toggle('is-selected', cb.checked);
    cb.addEventListener('change', () => {
      if (cb.checked) selected.add(sku); else selected.delete(sku);
      card.classList.toggle('is-selected', cb.checked);
      saveSet(SELECTED_KEY, selected);
    });
  });

  // Card body toggles checkbox (but ignore direct checkbox clicks)
  track.addEventListener('click', (e)=>{
    const card = e.target.closest('.fbt__item');
    if (!card || e.target.classList.contains('fbt__check')) return;
    const cb = card.querySelector('.fbt__check');
    if (!cb) return;
    cb.checked = !cb.checked;
    cb.dispatchEvent(new Event('change', {bubbles:false}));
  });

  // Layout / nav
  function measure(){
    const styles = getComputedStyle(track);
    const gap = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--fbt-gap')) || 14;
    const pad = parseFloat(styles.paddingLeft) || gap;
    padLeft = pad;

    const plusW = plus ? plus.getBoundingClientRect().width : 44;
    const innerW = track.clientWidth - pad * 2;
    const cardW = Math.floor((innerW - plusW - (gap * 2)) / VISIBLE);
    track.style.setProperty('--card-w', cardW + 'px');

    pages = Math.max(1, Math.ceil(items.length / VISIBLE));
    page = Math.min(page, pages - 1);
    goTo(page, false);
    syncArrows();
  }
  function goTo(p, smooth=true){
    page = Math.max(0, Math.min(p, pages - 1));
    const idx = page * VISIBLE;
    const target = items[idx];
    if (!target) return;
    const left = Math.round(target.offsetLeft - padLeft);
    track.scrollTo({ left, behavior: smooth ? 'smooth' : 'auto' });
    syncArrows();
  }
  function syncArrows(){ prev.disabled = (page===0); next.disabled = (page>=pages-1); }
  prev.addEventListener('click', ()=>goTo(page-1));
  next.addEventListener('click', ()=>goTo(page+1));
  window.addEventListener('resize', measure);
  track.addEventListener('scroll', ()=>{
    const sl = track.scrollLeft; let best=0, bestDelta=Infinity;
    for (let p=0; p<pages; p++){
      const idx=p*VISIBLE, left=Math.round(items[idx].offsetLeft - padLeft);
      const d=Math.abs(sl-left); if (d<bestDelta){bestDelta=d; best=p;}
    }
    if (best!==page){ page=best; syncArrows(); }
  }, {passive:true});

  // Add only NEWLY selected items; keep ticks visible
  add.addEventListener('click', ()=>{
    const toAdd = [];
    selected.forEach((sku)=>{
      if (!added.has(sku)) {
        const card = items.find(el => (el.dataset.sku||'') === sku);
        if (!card) return;
        const title = card.querySelector('.fbt__title')?.textContent.trim() || 'Product';
        const price = Number(card.dataset.price || '0');
        const img   = card.querySelector('img')?.getAttribute('src') || '';
        toAdd.push({ sku, title, price, img });
      }
    });

    if (toAdd.length === 0) return;
    toAdd.forEach(({sku,title,price,img})=>{
      if (typeof window.addToCart === 'function') {
        window.addToCart({ sku, grams:'FBT', title, price, img }, 1);
      } else {
        console.log('Add to cart:', {sku, title, price, img});
      }
      added.add(sku);
    });
    saveSet(ADDED_KEY, added);
    // Note: we DO NOT clear the checkboxes.
  });

  // If the entire cart becomes empty, forget the "already added" set
  window.addEventListener('cart-updated', (e)=>{
    const cart = e.detail?.cart || [];
    if (!Array.isArray(cart) || cart.length === 0){
      localStorage.removeItem(ADDED_KEY);
      added.clear();
    }
  });

  // When returning via bfcache, just reapply stored ticks quickly
  window.addEventListener('pageshow', ()=>{
    const selectedNow = loadSet(SELECTED_KEY);
    items.forEach(card=>{
      const sku = card.dataset.sku || '';
      const cb  = card.querySelector('.fbt__check');
      if (!cb) return;
      cb.checked = selectedNow.has(sku);
      card.classList.toggle('is-selected', cb.checked);
    });
  });

  measure();
})();
</script>


  <!-- for not copying a images and matter -->
<script>
(() => {
  const isInsideProtected = (node) => {
    if (!node) return false;
    const els = document.querySelectorAll('.protect-copy');
    return Array.from(els).some(el => el.contains(node.nodeType === 1 ? node : node.parentNode));
  };

  // Block right-click in protected areas
  document.addEventListener('contextmenu', (e) => {
    if (isInsideProtected(e.target)) e.preventDefault();
  });

  // Block text selection start in protected areas
  document.addEventListener('selectstart', (e) => {
    if (isInsideProtected(e.target)) e.preventDefault();
  });

  // Block dragging (e.g., dragging images) in protected areas
  document.addEventListener('dragstart', (e) => {
    if (isInsideProtected(e.target)) e.preventDefault();
  });

  // Block copy (Ctrl/Cmd+C or Edit → Copy) when selection is inside protected areas
  document.addEventListener('copy', (e) => {
    const sel = window.getSelection && window.getSelection();
    const anchor = sel && sel.anchorNode;
    if (isInsideProtected(anchor)) {
      e.preventDefault();
      // Optional: show a small toast/message instead of alert
      // alert('Copy has been disabled on this content.');
    }
  });

  // Block common shortcuts inside protected areas: Ctrl/Cmd+C, X, S, P, U, A
  document.addEventListener('keydown', (e) => {
    const k = (e.key || '').toLowerCase();
    const combo = e.ctrlKey || e.metaKey;
    if (!combo) return;

    // ignore typing in inputs/textareas/contenteditable
    if (e.target.closest('input, textarea, [contenteditable="true"]')) return;

    const sel = window.getSelection && window.getSelection();
    const inProtected = isInsideProtected(e.target) ||
                        (sel && sel.rangeCount && isInsideProtected(sel.anchorNode));

    if (inProtected && ['c','x','s','p','u','a'].includes(k)) {
      e.preventDefault();
    }
  });
})();
</script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>

  <script>
  /* Cart badge */
  (() => {
    const cartLink = document.getElementById('cartIcon');
    if (!cartLink) return;
    const iconEl = cartLink.querySelector('.header-icon') || cartLink;
    iconEl.style.position='relative';
    const style=document.createElement('style');
    style.textContent=`
      .cart-badge{position:absolute;top:-6px;right:-8px;min-width:18px;height:18px;padding:0 5px;border-radius:9999px;display:inline-flex;align-items:center;justify-content:center;background:#0a7f00;color:#fff;font-weight:900;font-size:11px;line-height:18px;box-shadow:0 1px 0 rgba(0,0,0,.15)}
      .cart-badge[hidden]{display:none!important}
      @keyframes cb-pop{0%{transform:scale(.6)}50%{transform:scale(1.15)}100%{transform:scale(1)}}
      .cart-badge.pop{animation:cb-pop .28s ease}
    `;
    document.head.appendChild(style);
    let badge=document.getElementById('cartBadge');
    if(!badge){badge=document.createElement('span');badge.id='cartBadge';badge.className='cart-badge';badge.hidden=true;badge.textContent='0';iconEl.appendChild(badge);}
    window.updateCartBadge=function(count){
      const n=Math.max(0,Number(count)||0);
      badge.hidden=n===0; badge.textContent=n>99?'99+':String(n);
      badge.classList.remove('pop'); void badge.offsetWidth; badge.classList.add('pop');
    };
    window.addEventListener('cart-updated',(e)=>{
      const items=e.detail?.cart||[];
      const total=items.reduce((s,it)=>s+(Number(it.qty)||0),0);
      window.updateCartBadge(total);
    });
    window.updateCartBadge(0);
  })();

  /* Shop + Search */
  document.querySelector('.shop-link')?.addEventListener('click', e=>{
    e.preventDefault(); document.getElementById('shopPanel')?.classList.toggle('show');
  });
  const searchIcon=document.querySelector('.search-icon'), searchBar=document.getElementById('searchBar'), closeSearch=document.getElementById('closeSearch');
  searchIcon?.addEventListener('click', e=>{
    e.preventDefault(); searchBar?.classList.add('show'); searchBar?.querySelector('input')?.focus();
  });
  closeSearch?.addEventListener('click', ()=> searchBar?.classList.remove('show'));

  /* Cart drawer with coupon engine */
/* -------- Cart drawer with coupon engine (PERSISTENT) -------- */
(() => {
    if (window._yonutriCartInit) return; window._yonutriCartInit = true;
    const drawer = document.getElementById('cart'), overlay = document.getElementById('overlay'), closeBtn = document.getElementById('closeCart'), cartIcon = document.getElementById('cartIcon'), itemsEl = document.getElementById('cartItems'), titleEl = document.getElementById('cartTitle'), totalEl = document.getElementById('totalRupees');
    if (!drawer || !overlay || !itemsEl || !titleEl || !totalEl) return;
    const INR = n => '₹' + Math.max(0, Math.round(Number(n) || 0)).toLocaleString('en-IN');

    const CART_KEY = 'yonutri_cart_v1';
    const COUPON_KEY = 'yonutri_coupon_v1';

    const loadCart = () => { try { return new Map(JSON.parse(localStorage.getItem(CART_KEY) || '[]')); } catch { return new Map(); } };
    const cart = loadCart(); const saveCart = () => { try { localStorage.setItem(CART_KEY, JSON.stringify([...cart])); } catch { } };

    const applyBtn = document.getElementById('applyCouponBtn');
    const removeBtn = document.getElementById('removeCouponBtn');
    const couponInput = document.getElementById('couponInput');
    const couponMessage = document.getElementById('couponMessage');
    const appliedRow = document.getElementById('appliedRow');
    const appliedSavings = document.getElementById('appliedSavings');
    const couponScroller = document.getElementById('couponScroller');

    let allCoupons = [];

    async function fetchCoupons() {
        try {
            const response = await fetch(`${API}/api/coupons`);
            if (!response.ok) throw new Error('Failed to fetch coupons');
            allCoupons = await response.json();
            console.log('Coupons fetched:', allCoupons);
            renderCouponScroller();
        } catch (error) {
            console.error('Error fetching coupons:', error);
        }
    }

    function renderCouponScroller() {
        if (!couponScroller) return;
        couponScroller.innerHTML = allCoupons.map(c => `
            <div class="coupon-card" data-code="${c.code}" style="border: 1px solid #ccc; border-radius: 8px; padding: 10px; cursor: pointer; min-width: 150px;">
                <div style="font-weight: bold;">${c.code}</div>
                <div style="font-size: 12px;">${c.discount_type === 'percent' ? c.discount_amount + '%' : '₹' + c.discount_amount} off</div>
                <div style="font-size: 10px; color: #666;">Min: ₹${c.minimum_amount || 0}</div>
            </div>
        `).join('');
    }

    couponScroller?.addEventListener('click', e => {
        const card = e.target.closest('.coupon-card');
        if (card) {
            couponInput.value = card.dataset.code;
            applyBtn.click();
        }
    });

    function getApplied() { try { return JSON.parse(localStorage.getItem(COUPON_KEY) || 'null'); } catch { return null; } }
    function setApplied(c) { if (!c) localStorage.removeItem(COUPON_KEY); else localStorage.setItem(COUPON_KEY, JSON.stringify(c)); }
    function calcDiscount(subtotal, c) { if (!c) return 0; if (subtotal < (c.minimum_amount || 0)) return 0; let d = c.discount_type === 'percent' ? subtotal * (c.discount_amount / 100) : c.discount_amount; return Math.min(Math.round(d), subtotal); }

    function openCart() { drawer.classList.add('active'); overlay.classList.add('active'); fetchCoupons(); }
    function closeCart() { drawer.classList.remove('active'); overlay.classList.remove('active'); }
    overlay.addEventListener('click', closeCart); closeBtn?.addEventListener('click', closeCart);
    cartIcon?.addEventListener('click', e => { e.preventDefault(); openCart(); });

    applyBtn?.addEventListener('click', () => {
        const enteredCode = couponInput.value.toUpperCase().trim();
        if (!enteredCode) {
            couponMessage.textContent = "Please enter a coupon code.";
            return;
        }

        const coupon = allCoupons.find(c => c.code === enteredCode);

        if (coupon) {
            setApplied(coupon);
            couponMessage.textContent = "";
            render();
        } else {
            couponMessage.textContent = "Invalid coupon code.";
            setApplied(null);
            render();
        }
    });

    removeBtn?.addEventListener('click', () => { setApplied(null); render(); });

    function render() {
        saveCart(); itemsEl.innerHTML = ''; let count = 0, subtotal = 0;

        for (const p of cart.values()) {
            count += p.qty;
            subtotal += p.qty * p.price;
            const variantLabel = p.grams || '';
            itemsEl.insertAdjacentHTML('beforeend', `
          <div class="c-row" data-key="${p.key}">
            <img class="c-thumb" src="${p.img}" alt="">
            <div class="c-mid">
              <h3 class="c-title">${p.title}</h3>
              <div class="c-sub">${variantLabel}</div>
              <div class="qty ${p.qty === 1 ? 'is-single' : ''}">
                <button class="dec" type="button">−</button>
                <span class="count">${p.qty}</span>
                <button class="inc" type="button">+</button>
              </div>
            </div>
            <div class="c-right">
              <div class="c-prices"><div class="c-price">${INR(p.price)}</div></div>
              <button class="c-trash" title="Remove"><i class="fa-solid fa-trash"></i></button>
            </div>
          </div>`);
        }

        const applied = getApplied();
        const discount = calcDiscount(subtotal, applied);

        if (applied && discount > 0) {
            appliedRow.style.display = 'flex';
            if (appliedSavings) appliedSavings.textContent = INR(discount);
            couponInput.value = applied.code;
            couponInput.disabled = true;
            applyBtn.style.display = 'none';
            removeBtn.style.display = 'inline-block';
            couponMessage.textContent = "";
        } else {
            appliedRow.style.display = 'none';
            if(applied && discount === 0 && subtotal < (applied.minimum_amount || 0)) {
                couponMessage.textContent = `You need to spend ₹${applied.minimum_amount} to use this coupon.`;
                setApplied(null); // Remove invalid coupon
            }
            couponInput.value = "";
            couponInput.disabled = false;
            applyBtn.style.display = 'inline-block';
            removeBtn.style.display = 'none';
        }


        titleEl.textContent = `Your cart · ${count} ${count === 1 ? 'item' : 'items'}`;
        totalEl.textContent = INR(subtotal - discount);

        if (window.updateCartBadge) window.updateCartBadge(count);
        window.dispatchEvent(new CustomEvent('cart-updated', { detail: { cart: [...cart.values()], subtotal, discount } }));
    }

    itemsEl.addEventListener('click', e => {
        const row = e.target.closest('.c-row'); if (!row) return;
        const key = row.dataset.key; const it = cart.get(key); if (!it) return;
        if (e.target.classList.contains('inc')) it.qty += 1;
        else if (e.target.classList.contains('dec')) it.qty -= 1;
        else if (e.target.closest('.c-trash')) it.qty = 0;
        else return;
        if (it.qty <= 0) cart.delete(key);
        render();
    });

    window.addToCart = function (item, qty = 1) {
        const key = (item.sku || '') + '|' + (item.grams || ''); const exist = cart.get(key);
        if (exist) exist.qty += qty; else cart.set(key, { ...item, key, qty: Math.max(1, qty) });
        render(); openCart();
    };
    window.changeCartQty = function (key, newQty, itemFactory) {
        if (newQty <= 0) { cart.delete(key); render(); return; }
        let it = cart.get(key);
        if (!it) {
            if (typeof itemFactory === 'function') { it = itemFactory(); if (!it) return; it.key = key; it.qty = 0; cart.set(key, it); }
            else return;
        }
        it.qty = newQty; render();
    };
    window.getCartQty = function (key) { const it = cart.get(key); return it ? it.qty : 0; };

    window.addEventListener('storage', (e) => {
        if (e.key === 'yonutri_cart_v1') { try { const arr = JSON.parse(e.newValue || '[]'); cart.clear(); arr.forEach(([k, v]) => cart.set(k, v)); } catch { } render(); }
        if (e.key === 'yonutri_coupon_v1') { render(); }
    });

    render();
    fetchCoupons();
  })();








// (() => {
//   const list = document.getElementById('offerList');
//   if (!list) return;
//   const INR = n => '₹' + Number(n).toLocaleString('en-IN');

//   const OFFERS = [
//     { sku:'minis4g', title:'CREAMY - Dark Chocolate Peanut Butter 350gms',    img:'images/CREAMY_Dark_Chocolate-removebg-preview.png',    price:299,   grams:'offer' },
//     { sku:'powerup', title:'CREAMY - Peanut Butter With Dates 350gms',      img:'images/CREAMY_Dates-removebg-preview.png',      price:299, grams:'Offer' },
//     { sku:'crunchy1', title:'CREAMY - Jaggery Peanut Butter 350gms',  img:'images/CREAMY_Jaggery-removebg-preview.png',      price:299,   grams:'Offer' },
//     { sku:'creamy1',  title:'CREAMY - Unsweetened Peanut Butter 350gms',   img:'images/CREAMY_Unsweetened-removebg-preview.png',       price:299,   grams:'Offer' },
//     { sku:'dates1',   title:'CRUNCHY - Dark Chocolate Peanut Butter 350gms',    img:'images/CRUNCHY_Dark_Chocolate-removebg-preview.png',        price:320,   grams:'Offer' },
//     { sku:'dark1',    title:'CRUNCHY - Peanut Butter With Dates 350gms',   img:'images/CRUNCHY_Dates-removebg-preview.png',         price:299,   grams:'Offer' },
//     { sku:'unsweet1', title:'CRUNCHY - Jaggery Peanut Butter',      img:'images/CRUNCHY_Jaggery-removebg-preview.png',      price:299,   grams:'Offer' },
//     { sku:'combo1',   title:'CRUNCHY - Unsweetened Peanut Butter 350gms',   img:'images/CRUNCHY_Unsweetened-removebg-preview.png',    price:299,   grams:'Offer' },
//   ];

//   const keyOf = o => `${o.sku}|${o.grams||''}`;
//   const qtyOf = o => (window.getCartQty ? window.getCartQty(keyOf(o)) : 0);

//   const cardHTML = (o) => {
//     const q = qtyOf(o);
//     return `
//       <div class="offer-card" data-sku="${o.sku}">
//         <img class="offer-thumb" src="${o.img}" alt="">
//         <div class="offer-title">${o.title}</div>
//         <div class="offer-price">
//           ${o.mrp ? `<span class="offer-old">${INR(o.mrp)}</span>` : ``}
//           <span>${INR(o.price)}</span>
//         </div>
//         ${
//           q > 0
//           ? `<div class="offer-qty">
//                <button class="dec" type="button">−</button>
//                <span class="count">${q}</span>
//                <button class="inc" type="button">+</button>
//              </div>`
//           : `<button class="offer-cta" type="button">+ ADD</button>`
//         }
//       </div>
//     `;
//   };

//   const render = () => { list.innerHTML = OFFERS.map(cardHTML).join(''); };

//   list.addEventListener('click', e => {
//     const card  = e.target.closest('.offer-card'); if (!card) return;
//     const offer = OFFERS.find(o => o.sku === card.dataset.sku); if (!offer) return;
//     const key   = keyOf(offer);
//     const cur   = qtyOf(offer);

//     if (e.target.classList.contains('offer-cta')) {
//       window.addToCart && window.addToCart({
//         sku: offer.sku, grams: offer.grams || 'Special Offer',
//         title: offer.title, price: offer.price, img: offer.img
//       });
//     } else if (e.target.classList.contains('inc')) {
//       window.changeCartQty && window.changeCartQty(key, cur + 1, () => ({
//         sku: offer.sku, grams: offer.grams || 'Special Offer',
//         title: offer.title, price: offer.price, img: offer.img
//       }));
//     } else if (e.target.classList.contains('dec')) {
//       window.changeCartQty && window.changeCartQty(key, cur - 1);
//     }

//     render();
//   });

//   window.addEventListener('cart-updated', render);
//   render();
// })();












  /* PDP URL params -> UI */
  (() => {
    const params = new URLSearchParams(location.search);
    const pdp = document.getElementById('pdp');
    const titleEl = document.getElementById('pdpTitle');
    const priceEl = document.getElementById('pdpPrice');
    const imgEl = document.getElementById('product-image');
    if (!pdp || !titleEl || !priceEl || !imgEl) return;

    const formatGrams = (g) => {
      if (!g) return '';
      const n = String(g).trim();
      return /^\d+$/.test(n) ? `${n} gms` : n;
    };

    const urlSku   = params.get('sku')   || pdp.dataset.sku || '';
    const urlGrams = formatGrams(params.get('grams') || pdp.dataset.grams || '');
    const urlPrice = params.get('price') || pdp.dataset.price || '';
    const urlImg   = params.get('img')   || imgEl.getAttribute('src') || '';
    const urlTitleRaw = params.get('title') || titleEl.innerText.trim();

    // Transform title to uppercase first word + " - " + rest of title
    function transformTitle(title) {
      if (!title) return '';
      const parts = title.trim().split(/\s+/);
      if (parts.length === 0) return '';
      const firstWord = parts[0].toUpperCase();
      const rest = parts.slice(1).join(' ');
      return rest ? `${firstWord} - ${rest}` : firstWord;
    }

    const urlTitle = transformTitle(urlTitleRaw);

    pdp.dataset.sku   = urlSku;
    pdp.dataset.grams = urlGrams;
    if (urlPrice) pdp.dataset.price = urlPrice;

    titleEl.textContent = urlTitle || `Product - ${urlGrams}`;
    if (urlPrice) priceEl.textContent = String(urlPrice);
    if (urlImg)   imgEl.src = urlImg;

    try {
      const t = titleEl.textContent;
      const patched = t.replace(/(\d+\s*gms)\b/i, urlGrams || '$1');
      titleEl.textContent = patched;
    } catch {}
  })();

  /* PDP qty + Add to Cart */
  (() => {
    const pdp=document.getElementById('pdp'); if(!pdp) return;
    const minus=document.getElementById('minus'), plus=document.getElementById('plus'), qtyIn=document.getElementById('quantity'), addBtn=document.getElementById('pdpAdd'), qtyWrap=document.getElementById('pdpQtyWrap');
    const titleEl=document.getElementById('pdpTitle'), imgEl=document.getElementById('product-image');
    const sku=pdp.dataset.sku||'pdp-sku', grams=pdp.dataset.grams||'', price=Number(pdp.dataset.price||'0');

    const clampZero=n=>{ n=parseInt(n??'0',10); return Number.isFinite(n)&&n>=0?n:0; };
    const syncZeroState=()=> qtyWrap?.classList.toggle('is-zero', clampZero(qtyIn.value)===0);

    qtyIn.value=clampZero(qtyIn.value); syncZeroState();
    minus?.addEventListener('click', ()=>{ qtyIn.value=Math.max(0, clampZero(qtyIn.value)-1); syncZeroState(); });
    plus?.addEventListener('click',  ()=>{ qtyIn.value=clampZero(qtyIn.value)+1; syncZeroState(); });
    qtyIn?.addEventListener('input', ()=>{ qtyIn.value=clampZero(qtyIn.value); syncZeroState(); });

addBtn?.addEventListener('click', ()=>{
  const qty=clampZero(qtyIn.value); if (qty===0) return;
  const item={ sku, grams, title:titleEl?.innerText?.trim()||'Product', price, img: imgEl?.getAttribute('src')||'' };
  window.addToCart && window.addToCart(item, qty);
});
  })();

  /* Image dots + fullscreen */
    (() => {
      // Dynamically build images array based on main product image and related images
      const productImage = document.getElementById("product-image");
      const params = new URLSearchParams(window.location.search);
     let images = [
         "images/CREAMY_Dark_Chocolate-removebg-preview.png",
         "images/why choose us.jpg",
      "images/peanut_butter_Sep14-11.jpg",
      "images/peanut_butter_Sep14-12.jpg",
];
// Existing gallery/zoom code will create dots/thumbnails and update currentImageIndex


      // Check for multiple images passed via URL param "imgs" as comma separated
      const imgsParam = params.get('imgs');
      if (imgsParam) {
        images = imgsParam.split(',').map(s => s.trim()).filter(s => s.length > 0);
      }

      // Fallback to main image if no imgs param
      if (images.length === 0) {
        images = [productImage.getAttribute('src')];
      }

      const zoomIcon     = document.querySelector(".zoom-icon");
      const dotsWrap     = document.getElementById("sliderDots");

      let currentImageIndex = 0;
      let dots = [];

      function buildMainDots(){
        dotsWrap.innerHTML = images.map((_, i) => `<span class="dot ${i===currentImageIndex?'active':''}" data-idx="${i}"></span>`).join('');
        dots = [...dotsWrap.querySelectorAll('.dot')];
        dots.forEach(d => d.addEventListener('click', (e) => {
          currentImageIndex = Number(e.currentTarget.dataset.idx);
          sync();
        }));
      }

      function updateDots(){
        dots.forEach((d, i) => d.classList.toggle('active', i === currentImageIndex));
        document.querySelectorAll('#modal-dots .dot').forEach((d, i) => {
          d.classList.toggle('active', i === currentImageIndex);
          d.style.background = i === currentImageIndex ? '#fff' : '#ddd';
        });
      }

      function sync(){
        productImage.src = images[currentImageIndex];
        const fs = document.getElementById("fullscreen-img");
        if (fs) fs.src = images[currentImageIndex];
        updateDots();
      }

      buildMainDots();
      sync();

    const modal = document.createElement("div");
    modal.id = "fullscreen-modal";
    modal.style.cssText = "display:none;position:fixed;inset:0;z-index:20000;background:rgba(0,0,0,.7);justify-content:center;align-items:center";
    modal.innerHTML = `
      <div class="modal-content" style="position:relative;max-width:90vw;max-height:90vh;display:flex;align-items:center;justify-content:center">
        <span class="close-btn" style="position:absolute;top:-40px;right:0;color:#fff;font-size:32px;cursor:pointer">&times;</span>
        <img id="fullscreen-img" src="${images[currentImageIndex]}" alt="image" class="protect-copy" style="width:min(900px,80vw);max-height:80vh;object-fit:contain;border-radius:8px;box-shadow:0 8px 40px rgba(0,0,0,.4)">
        <div class="modal-nav" style="position:absolute;top:50%;left:0;right:0;transform:translateY(-50%);display:flex;justify-content:space-between;pointer-events:none">
          <span class="prev" style="pointer-events:auto;color:#fff;font-size:44px;cursor:pointer;padding:10px 16px">&#10094;</span>
          <span class="next" style="pointer-events:auto;color:#fff;font-size:44px;cursor:pointer;padding:10px 16px">&#10095;</span>
        </div>
        <div id="modal-dots" style="position:absolute;bottom:-34px;left:0;right:0;display:flex;gap:8px;justify-content:center">
          ${images.map((_,i)=>`<span class="dot ${i===0?'active':''}" style="height:10px;width:10px;border-radius:50%;background:${i===0?'#fff':'#ddd'};display:inline-block"></span>`).join('')}
        </div>
      </div>`;
    document.body.appendChild(modal);

    const closeBtn  = modal.querySelector(".close-btn"),
          prevBtn   = modal.querySelector(".prev"),
          nextBtn   = modal.querySelector(".next"),
          modalDots = modal.querySelectorAll("#modal-dots .dot");

    const showPrev = () => { currentImageIndex = (currentImageIndex - 1 + images.length) % images.length; sync(); };
    const showNext = () => { currentImageIndex = (currentImageIndex + 1) % images.length; sync(); };

    zoomIcon.addEventListener("click", () => {
      modal.style.display = "flex";
      document.getElementById("fullscreen-img").src = images[currentImageIndex];
      updateDots();
      document.body.style.overflow = 'hidden';
    });
    closeBtn.addEventListener("click", () => { modal.style.display="none"; document.body.style.overflow=''; });
    modal.addEventListener("click", (e) => { if (e.target.id === "fullscreen-modal"){ modal.style.display="none"; document.body.style.overflow=''; }});
    prevBtn.addEventListener("click", showPrev);
    nextBtn.addEventListener("click", showNext);
    modalDots.forEach((d,i)=> d.addEventListener('click', ()=>{ currentImageIndex=i; sync(); }));
    window.addEventListener('keydown', (e) => {
      if (modal.style.display !== "flex") return;
      if (e.key === 'ArrowLeft')  showPrev();
      if (e.key === 'ArrowRight') showNext();
      if (e.key === 'Escape') { modal.style.display='none'; document.body.style.overflow=''; }
    });
  })();


  
  /* Special Offers shelf (drawer) */
  (() => {
    const list = document.getElementById('offerList');
    if (!list) return;
    const INR = n => '₹' + Number(n).toLocaleString('en-IN');

    // Static sample offers data to replace missing API
    const OFFERS = [
      {
        sku: 'creamydarkchoco',
        title: 'Creamy Peanut Butter dark chocolate',
        img: 'images/CREAMY_Dark_Chocolate-removebg-preview.png',
        mrp: 480,
        price: 432,
        grams: '350 gms'
      },
      {
        sku: 'creamydates',
        title: 'Creamy Peanut Butter dates',
        img: 'images/CREAMY_Dates-removebg-preview.png',
        mrp: 399,
        price: 359.1,
        grams: '350 gms'
      }
    ];

    const keyOf = o => `${o.sku}|${o.grams || ''}`;
    const qtyOf = o => (window.getCartQty ? window.getCartQty(keyOf(o)) : 0);

    const cardHTML = o => {
      const q = qtyOf(o);
      return `
        <div class="offer-card" data-sku="${o.sku}">
          <img class="offer-thumb" src="${o.img}" alt="">
          <div class="offer-title">${o.title}</div>
          <div class="offer-price">
            ${o.mrp ? `<span class="offer-old">${INR(o.mrp)}</span>` : ''}
            <span>${INR(o.price)}</span>
          </div>
          ${q > 0
            ? `<div class="offer-qty">
                 <button class="dec" type="button">−</button>
                 <span class="count">${q}</span>
                 <button class="inc" type="button">+</button>
               </div>`
            : `<button class="offer-cta" type="button">+ ADD</button>`
          }
        </div>`;
    };

    const render = () => {
      if (OFFERS.length === 0) {
        list.closest('.offers-wrap').style.display = 'none';
      } else {
        list.innerHTML = OFFERS.map(cardHTML).join('');
        list.closest('.offers-wrap').style.display = 'block';
      }
    };

    list.addEventListener('click', e => {
      const card = e.target.closest('.offer-card');
      if (!card) return;
      const offer = OFFERS.find(o => o.sku == card.dataset.sku);
      if (!offer) return;
      const key = keyOf(offer);
      const cur = qtyOf(offer);

      if (e.target.classList.contains('offer-cta')) {
        window.addToCart && window.addToCart({
          sku: offer.sku, grams: offer.grams || 'Special Offer',
          title: offer.title, price: offer.price, img: offer.img
        });
      } else if (e.target.classList.contains('inc')) {
        window.changeCartQty && window.changeCartQty(key, cur + 1, () => ({
          sku: offer.sku, grams: offer.grams || 'Special Offer',
          title: offer.title, price: offer.price, img: offer.img
        }));
      } else if (e.target.classList.contains('dec')) {
        window.changeCartQty && window.changeCartQty(key, cur - 1);
      }
      render();
    });

    render();

    window.addEventListener('cart-updated', render);
  })();

  /* FBT Add Selected */
  (() => {
    const btn=document.getElementById('addSelectedFbt'); if (!btn) return;
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.fbt-item').forEach(card=>{
        const checked=card.querySelector('.fbt-check')?.checked; if(!checked) return;
        const title=card.querySelector('.fbt-title')?.textContent.trim()||'Product';
        const price=649; 
        // adjust if dynamic
        const img=card.querySelector('img')?.getAttribute('src')||'';
        const sku=card.dataset.sku||'fbt';
        window.addToCart && window.addToCart({ sku, grams:'FBT', title, price, img }, 1);
      });
    });
  })();

  /* Marquee JS */
  (() => {
    const container = document.getElementById('marqueeAlt');
    const track     = document.getElementById('trackAlt');
    const content   = document.getElementById('contentAlt');
    if (!container || !track || !content) return;

    function setup(){
      [...track.children].forEach((el,i)=>{ if(i) el.remove(); });
      const blockWidth = content.scrollWidth;
      let totalWidth = blockWidth;
      while (totalWidth < container.clientWidth + blockWidth * 2) {
        track.appendChild(content.cloneNode(true));
        totalWidth += blockWidth;
      }
      track.style.setProperty('--shift', blockWidth + 'px');
      const styles = getComputedStyle(document.documentElement);
      const pps = parseFloat(styles.getPropertyValue('--px-per-sec')) || 120;
      const seconds = Math.max(6, blockWidth / pps);
      track.style.setProperty('--duration', seconds + 's');
    }

    const init = ()=>setup();
    if (document.fonts?.ready) document.fonts.ready.then(init);
    init();
    window.addEventListener('resize', setup);
  })();
  
  </script>

  <!--navbar hide-->
  <script>
    let lastScrollY = window.scrollY;
    const navbar = document.querySelector('.yonutri-navbar');
    window.addEventListener('scroll', () => {
      if (window.scrollY > lastScrollY) {
        navbar.classList.add('hidden');
      } else {
        navbar.classList.remove('hidden');
      }
      lastScrollY = window.scrollY;
    });
  </script>
  <!--marquee top-->
  <script>
    (() => {
      const container = document.getElementById('marquee');
      const track     = document.getElementById('track');
      const content   = document.getElementById('content');
      if(!container || !track || !content) return;

      function setup(){
        // keep only the first block, then clone until we overflow enough
        [...track.children].forEach((el,i)=>{ if(i) el.remove(); });
        const blockWidth = content.scrollWidth;
        let totalWidth = blockWidth;
        const needWidth = container.clientWidth * 2 + blockWidth;
        while(totalWidth < needWidth){
          track.appendChild(content.cloneNode(true));
          totalWidth += blockWidth;
        }
        track.style.setProperty('--shift', blockWidth + 'px');
        const styles = getComputedStyle(document.documentElement);
        const pxPerSec = parseFloat(styles.getPropertyValue('--px-per-sec')) || 120;
        const seconds = Math.max(6, blockWidth / pxPerSec);
        track.style.setProperty('--duration', seconds + 's');
      }

      const init = ()=>setup();
      if (document.fonts?.ready) document.fonts.ready.then(init);
      init();
      window.addEventListener('resize', setup);
    })();
  </script>

<script>
(() => {
  const panel = document.getElementById('shopPanel');
  if (!panel) return;

  panel.querySelectorAll('a.shop-link').forEach(a => {
    a.addEventListener('click', (e) => {
      const href = a.getAttribute('href') || '';
      const isHash = href.startsWith('#') && href.length > 1;

      // Close the panel immediately
      panel.classList.remove('show');
      document.body.classList.remove('shop-open');

      if (isHash) {
        // Same-page smooth scroll
        e.preventDefault();
        const el = document.querySelector(href);
        if (el) setTimeout(() => el.scrollIntoView({ behavior: 'smooth', block: 'start' }), 0);
      }
      // IMPORTANT: Do NOT prevent default for normal links (e.g., index.html#love-choco)
    });
  });

  // Close when clicking the backdrop area
  panel.addEventListener('click', (e) => {
    if (e.target === panel) {
      panel.classList.remove('show');
      document.body.classList.remove('shop-open');
    }
  });
})();
</script>





<script>
(() => {
  const header   = document.querySelector('.yonutri-navbar') || document.querySelector('header');
  const drawer   = document.getElementById('shopDrawer');
  const openBtn  = document.getElementById('hamburgerBtn');
  const closeBtn = document.getElementById('closeShopDrawer');
  const overlay  = document.getElementById('overlay');
  const TRANS_MS = 320;

  function placeSheetUnderHeader(){
    const rect = header ? header.getBoundingClientRect() : { bottom: 0 };
    const top  = Math.max(0, rect.bottom) + 8; // 8px gap
    drawer.style.setProperty('--sheet-top', top + 'px');
  }

  function open() {
    placeSheetUnderHeader();
    drawer.classList.add('open');
    overlay.classList.add('show');
    drawer.setAttribute('aria-hidden','false');
    overlay.setAttribute('aria-hidden','false');
    document.documentElement.classList.add('modal-open');
    document.body.classList.add('modal-open');
    (closeBtn || drawer).focus();
    openBtn?.setAttribute('aria-expanded','true');
  }

  function close() {
    // return focus FIRST to avoid aria-hidden warning
    openBtn?.focus();

    drawer.classList.remove('open');
    overlay.classList.remove('show');
    openBtn?.setAttribute('aria-expanded','false');
    document.documentElement.classList.remove('modal-open');
    document.body.classList.remove('modal-open');

    setTimeout(() => {
      drawer.setAttribute('aria-hidden','true');
      overlay.setAttribute('aria-hidden','true');
    }, TRANS_MS);
  }

  // events
  openBtn?.addEventListener('click', open);
  closeBtn?.addEventListener('click', close);
  overlay?.addEventListener('click', close);
  window.addEventListener('keydown', e => { if (e.key === 'Escape' && drawer.classList.contains('open')) close(); });

  // keep the sheet glued under the header on rotate/resize/scroll
  ['resize','orientationchange','scroll'].forEach(evt => window.addEventListener(evt, () => {
    if (drawer.classList.contains('open')) placeSheetUnderHeader();
  }));

  // close when tapping in-page anchors
  drawer.addEventListener('click', (e) => {
    const a = e.target.closest('a.category-item');
    if (a && (a.getAttribute('href')||'').startsWith('#')) close();
  });
})();
</script>




  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>

(() => {
  const list = document.getElementById('offerList');
  if (!list) return;
  const INR = n => '₹' + Number(n).toLocaleString('en-IN');

  const OFFERS = [
    { sku:'minis4g', title:'CREAMY - Dark Chocolate Peanut Butter 350gms',    img:'images/CREAMY_Dark_Chocolate-removebg-preview.png',    price:299,   grams:'offer' },
    { sku:'powerup', title:'CREAMY - Peanut Butter With Dates 350gms',      img:'images/CREAMY_Dates-removebg-preview.png',      price:299, grams:'Offer' },
    { sku:'crunchy1', title:'CREAMY - Jaggery Peanut Butter 350gms',  img:'images/CREAMY_Jaggery-removebg-preview.png',      price:299,   grams:'Offer' },
    { sku:'creamy1',  title:'CREAMY - Unsweetened Peanut Butter 350gms',   img:'images/CREAMY_Unsweetened-removebg-preview.png',       price:299,   grams:'Offer' },
    { sku:'dates1',   title:'CRUNCHY - Dark Chocolate Peanut Butter 350gms',    img:'images/CRUNCHY_Dark_Chocolate-removebg-preview.png',        price:299,   grams:'Offer' },
    { sku:'dark1',    title:'CRUNCHY - Peanut Butter With Dates 350gms',   img:'images/CRUNCHY_Dates-removebg-preview.png',         price:299,   grams:'Offer' },
    { sku:'unsweet1', title:'CRUNCHY - Jaggery Peanut Butter',      img:'images/CRUNCHY_Jaggery-removebg-preview.png',      price:299,   grams:'Offer' },
    { sku:'combo1',   title:'CRUNCHY - Unsweetened Peanut Butter 350gms',   img:'images/CRUNCHY_Unsweetened-removebg-preview.png',    price:299,   grams:'Offer' },
  ];

  const keyOf = o => `${o.sku}|${o.grams||''}`;
  const qtyOf = o => (window.getCartQty ? window.getCartQty(keyOf(o)) : 0);

  const cardHTML = (o) => {
    const q = qtyOf(o);
    return `
      <div class="offer-card" data-sku="${o.sku}">
        <img class="offer-thumb" src="${o.img}" alt="">
        <div class="offer-title">${o.title}</div>
        <div class="offer-price">
          ${o.mrp ? `<span class="offer-old">${INR(o.mrp)}</span>` : ``}
          <span>${INR(o.price)}</span>
        </div>
        ${
          q > 0
          ? `<div class="offer-qty">
               <button class="dec" type="button">−</button>
               <span class="count">${q}</span>
               <button class="inc" type="button">+</button>
             </div>`
          : `<button class="offer-cta" type="button">+ ADD</button>`
        }
      </div>
    `;
  };

  const render = () => { list.innerHTML = OFFERS.map(cardHTML).join(''); };

  list.addEventListener('click', e => {
    const card  = e.target.closest('.offer-card'); if (!card) return;
    const offer = OFFERS.find(o => o.sku === card.dataset.sku); if (!offer) return;
    const key   = keyOf(offer);
    const cur   = qtyOf(offer);

    if (e.target.classList.contains('offer-cta')) {
      window.addToCart && window.addToCart({
        sku: offer.sku, grams: offer.grams || 'Special Offer',
        title: offer.title, price: offer.price, img: offer.img
      });
    } else if (e.target.classList.contains('inc')) {
      window.changeCartQty && window.changeCartQty(key, cur + 1, () => ({
        sku: offer.sku, grams: offer.grams || 'Special Offer',
        title: offer.title, price: offer.price, img: offer.img
      }));
    } else if (e.target.classList.contains('dec')) {
      window.changeCartQty && window.changeCartQty(key, cur - 1);
    }

    render();
  });

  window.addEventListener('cart-updated', render);
  render();
})();
</script>
</body>
</html>
