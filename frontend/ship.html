<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yo Nutri!</title>

  <!-- Fonts / Icons / Bootstrap -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">   
  <link rel="stylesheet" href="ship.css">
  <link rel="stylesheet" href="style.css">

  <!-- Razorpay Checkout Script -->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

  <style>
        /* ==== STOP horizontal page scroll on all screens ==== */
html, body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;       /* fallback */
}
@supports (overflow-x: clip) {
  html, body { overflow-x: clip; }  /* modern browsers */
}
  </style>
  <!-- ===== cart look like your 2nd screenshot ===== -->
  <style>
    :root{
      --border:#e9e9e9; --ink:#1f1f1f; --muted:#6f6f6f;
      --accent:#0a7f00; --pill:#121212; --brand:#ffb347;
    }

    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);opacity:0;pointer-events:none;transition:.25s;z-index:1001}
    .overlay.active{opacity:1;pointer-events:auto}
    .cart{position:fixed;top:0;right:0;bottom:0;width:392px;max-width:88vw;background:#fff;
      transform:translateX(110%);transition:.3s ease;z-index:1002;display:grid;
      grid-template-rows:auto 1fr auto;border-left:1px solid var(--border)}
    .cart.active{transform:translateX(0)}

    .cart-hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
    .cart-title{display:flex;align-items:center;gap:10px;font-weight:800;font-size:16px}
    .cart-close{cursor:pointer;font-size:18px;color:#222}

    .cart-bd{padding:14px 14px 0;overflow:auto;scrollbar-width:none}
    .cart-bd::-webkit-scrollbar{width:0;height:0}

    .c-items{display:flex;flex-direction:column;gap:12px;margin-bottom:12px}
    .c-row{
      display:grid;grid-template-columns:56px 1fr auto;gap:12px;align-items:start;
      background:#fff;border:1px solid #ededed;border-radius:16px;padding:12px;
      box-shadow:0 1px 0 rgba(0,0,0,.03) inset;
    }
    .c-thumb{width:56px;height:56px;object-fit:contain;border-radius:10px;background:#f7f7f7}
    .c-mid{min-width:0}
    .c-title{margin:0;font-size:14px;line-height:1.3;font-weight:800;color:#1f1f1f}
    .c-sub{font-size:12px;color:var(--muted);margin:6px 0 8px}
    .c-right{display:flex;align-items:center;gap:8px}
    .c-prices{display:flex;flex-direction:column;align-items:flex-end;line-height:1.05;min-width:70px}
    .c-price{font-weight:900;font-size:14px;color:#1f1f1f}
    .c-trash{border:none;background:transparent;color:#b5b5b5;width:30px;height:30px;border-radius:8px;cursor:pointer}
    .c-trash:hover{color:#222}

    .qty{display:inline-flex;align-items:center;gap:0;border:1.5px solid #121212;border-radius:9999px;padding:4px;background:#fff;height:34px}
    .qty .dec,.qty .inc{
      border:0;cursor:pointer;height:26px;min-width:32px;border-radius:8px;
      font-weight:900;font-size:16px;display:flex;align-items:center;justify-content:center;
    }
    .qty .dec{background:#efefef;color:#222}
    .qty.is-single .dec{background:#f3f3f3;color:#9a9a9a}
    .qty .count{width:28px;text-align:center;font-weight:700;font-size:14px;color:#1f1f1f}
    .qty .inc{background:#3e2723;color:#fff}

    .cart-section{border-top:1px solid var(--border);margin:14px -14px 0;padding:10px}
    .sec-title{font-weight:800;font-size:14px;margin:0 0 12px}

    .coupon-band{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      border:1px solid #e7efe7;border-radius:14px;padding:14px 16px;background:#fff
    }
    .coupon-left{display:flex;align-items:center;gap:10px}
    .coupon-left .icon{width:22px;height:22px;display:grid;place-items:center;border-radius:999px;background:#e9f7ea;color:#138a00}
    .coupon-text{display:flex;flex-direction:column;line-height:1.2}
    .coupon-main{font-weight:800;color:#138a00;font-size:14px}
    .coupon-sub{font-size:12px;color:#666}
    .coupon-apply{padding:6px 12px;border:1px solid #cfd8cf;border-radius:12px;background:#fff;font-weight:800;font-size:12px;cursor:pointer}
    .applied-row{display:flex;align-items:center;gap:8px;color:#0a7f00;font-weight:700;font-size:13px;margin-top:10px}
    .applied-row i{color:#0a7f00}

    .offers-wrap{border:1px solid var(--border);border-radius:14px;padding:12px;background:#fff}
    .offers-head{font-weight:800;color:#138a00;margin:0 0 10px}
    .offer-list{display:flex;gap:12px;overflow:auto;padding-bottom:6px;scroll-snap-type:x mandatory}
 .offer-card{
    flex:0 0 150px; border:1px solid #e9e9e9; border-radius:14px; padding:10px;
    display:flex; flex-direction:column; gap:8px; background:#fff; 
    scroll-snap-align:start;overflow: visible
  }
  .offer-thumb{ width:100%; aspect-ratio: 1 / 1;   height: auto; display: block;
  padding: 8px; 
     object-fit:contain;
      /* background:#f7f7f7;  */
      border-radius:10px }
      
     @supports not (aspect-ratio: 1 / 1) {
  .offer-thumb{ height: 120px; }   /* was 76px — give more headroom */
}

    .offer-title{font-size:12px;font-weight:800;line-height:1.2;min-height:32px}
    .offer-price{display:flex;align-items:center;justify-content:space-between;font-size:12px}
    .offer-old{text-decoration:line-through;color:#777}
    .offer-cta,.offer-qty{height:32px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:900;cursor:pointer}
    .offer-cta{border:1px solid #2b8a00;background:#fff}
    .offer-qty{border:1.5px solid #121212;gap:6px;padding:0 4px}
    .offer-qty .dec,.offer-qty .inc{height:26px;min-width:28px;border:0;border-radius:8px;font-weight:900;font-size:14px;display:flex;align-items:center;justify-content:center;cursor:pointer}
    .offer-qty .dec{background:#e9e9e9}
    .offer-qty .inc{background:#16271b;color:#fff}
    .offer-qty .count{min-width:20px;text-align:center;font-weight:800}

    .cart-ft{border-top:1px solid var(--border);background:#fff;padding:12px 14px;display:grid;gap:10px}
    .total-line{display:flex;align-items:center;justify-content:space-between}
    .total-left small{color:#666}
    .checkout{width:100%;background:#FFA500;color:#fff;border:none;border-radius:9999px;padding:12px 16px;font-weight:900;cursor:pointer}

    .cart-badge{position:absolute;top:-6px;right:-8px;min-width:18px;height:18px;padding:0 5px;border-radius:9999px;display:inline-flex;align-items:center;justify-content:center;background:#0a7f00;color:#fff;font-weight:900;font-size:11px;line-height:18px;box-shadow:0 1px 0 rgba(0,0,0,.15)}
    .cart-badge[hidden]{display:none !important}
    @keyframes cb-pop{0%{transform:scale(.6)}50%{transform:scale(1.15)}100%{transform:scale(1)}}
    .cart-badge.pop{animation:cb-pop .28s ease}
  </style>
</head>
<body>

<header class="yonutri-navbar">
  <div class="navbar-top">
    <div class="nav-left">
      <a href="#" class="shop-link"><i class="fas fa-arrow-up-right-from-square"></i> SHOP</a>
                       <button id="hamburgerBtn" class="hamburger"><i class="fas fa-bars"></i>MENU</button>

    </div>
    <div class="nav-center">
      <a href="index.html" class="logo-link">
        <img src="images/WhatsApp Image 2025-08-08 at 9.47.38 AM.jpeg" alt="Yo Nutri Logo" class="nav-logo protect-copy"/>
      </a>
    </div>
    <div class="nav-right">
      <a href="#" class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></a>
      <a href="login.html"><i class="fa-solid fa-user"></i></a>
      <a href="#" id="cartIcon">CART <i class="header-icon fa-solid fa-cart-shopping"></i></a>
    </div>
  </div>
  <div class="search-bar" id="searchBar">
    <input type="text" placeholder="Search" />
    <span class="close-search" id="closeSearch">&times;</span>
  </div>
</header>

<div class="shop-panel" id="shopPanel">
  <div class="shop-panel-content">
    <a href="#" class="shop-link"><div class="shop-sidebar"><h5>SHOP BY CATEGORY</h5></div></a>
    <div class="category-grid">
      <a href="index.html" class="shop-link"><div class="category-item"><span>New Launches & Offers</span><img src="images/chocolate1.png" alt="image" class="protect-copy"></div></a>
      <a href="index.html" class="shop-link"><div class="category-item"><span>All Products</span><img src="images/image (2).png" alt="image" class="protect-copy"></div></a>
      <a href="index.html" class="shop-link"><div class="category-item"><span>Protein</span><img src="images/chocolate6.jpg" alt="image" class="protect-copy"></div></a>
      <a href="index.html#love-choco" class="shop-link"><div class="category-item"><span>Bars</span><img src="images/roasted6.jpg" alt="image" class="protect-copy"></div></a>
      <a href="index.html#yo-products" class="shop-link"><div class="category-item"><span>All Peanut Butter</span><img src="images/CREAMY_Dark_Chocolate-removebg-preview.png" alt="image" class="protect-copy"></div></a>
      <a href="index.html#yo-products" class="shop-link"><div class="category-item"><span>Peanut Butter Creamy</span><img src="images/CREAMY_Dates-removebg-preview.png" alt="image" class="protect-copy"></div></a>
      <a href="index.html#crunchy" class="shop-link"><div class="category-item"><span>Peanut Butter Crunchy</span><img src="images/CRUNCHY_Dark_Chocolate-removebg-preview.png" alt="image" class="protect-copy"></div></a>
      <a href="index.html#yo-products" class="shop-link"><div class="category-item"><span>Protein Bundle</span><img src="images/chocolate7.jpg" alt="image" class="protect-copy"></div></a>
    </div>
  </div>
</div>



<!-- Shop Drawer -->
<aside class="shop-drawer" id="shopDrawer">
  <div class="shop-drawer-header">
    <h4>SHOP BY CATEGORY</h4>
    <i class="fa-solid fa-xmark" id="closeShopDrawer"></i> 
  </div>
  <div class="shop-drawer-body">
    <a href="#yn-love" class="category-item">
      <img src="images/image (1).png" alt="image" class="protect-copy">
      <span>New Launches & Offers</span>
    </a>
    <a href="" class="category-item">
      <img src="images/image (2).png" alt="image" class="protect-copy">
      <span>All Products</span>
    </a>
    <a href="" class="category-item">
      <img src="images/chocolate6.jpg" alt="image" class="protect-copy">
      <span>Protein</span>
    </a>
    <a href="#yn-love" class="category-item">
      <img src="images/roasted6.jpg" alt="image" class="protect-copy">
      <span>Bars</span>
    </a>
    <a href="#yn-love" class="category-item">
      <span>All Peanut Butter</span><img src="images/CREAMY_Dark_Chocolate-removebg-preview.png" alt="image" class="protect-copy">
    </a>
    <a href="##yn-love" class="category-item">
      <span>Protein Bundle</span><img src="images/chocolate7.jpg" alt="image" class="protect-copy">
    </a>
    <a href="#yn-love" class="category-item"><span>Peanut Butter Creamy</span>
      <img src="images/CREAMY_Dates-removebg-preview.png" alt="image" class="protect-copy"></a>
        <a href="#yo-products" class="category-item"><span>Peanut Butter Crunchy</span>
          <img src="images/CRUNCHY_Dark_Chocolate-removebg-preview.png" alt="image" class="protect-copy"></a>
    <!-- ... repeat categories ... -->
  </div>
</aside>
<!-- Overlay (ADD THIS) -->
<div class="overlay" id="overlay" tabindex="-1" aria-hidden="true"></div>







<div class="overlay" id="overlay"></div>
<!-- Cart Drawer -->
  <aside class="cart" id="cart">
    <div class="cart-hd">
      <div class="cart-title"><i class="fa-solid fa-cart-shopping"></i><span id="cartTitle">Your cart · 0 item</span></div>
      <i class="fa-solid fa-xmark cart-close" id="closeCart" title="Close"></i>
    </div>
    <div class="cart-bd">
      <div class="c-items" id="cartItems"></div>

      <div class="cart-section">
        <div class="sec-title">Apply Coupon</div>
        <div class="coupon-form" style="display: flex; gap: 10px;">
          <input type="text" id="couponInput" placeholder="Enter coupon code" style="flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 8px;">
          <button id="applyCouponBtn" class="coupon-apply" type="button">Apply</button>
        </div>
        <div id="couponMessage" style="margin-top: 10px; color: red; font-size: 12px;"></div>

        <div id="appliedRow" class="applied-row" style="display:none">
          <i class="fa-regular fa-circle-check"></i>
          <span><span id="appliedSavings">₹0</span> total savings</span>
          <button id="removeCouponBtn" class="coupon-apply" type="button">Remove</button>
        </div>
      </div>

      <div class="cart-section">
        <div class="sec-title">Available Coupons</div>
        <div id="couponScroller" style="display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px;">
          <!-- Coupons will be dynamically inserted here -->
        </div>
      </div>

      <div class="cart-section">
        <div class="offers-wrap">
          <div class="offers-head">Special Offers For You</div>
          <div class="offer-list" id="offerList"></div>
        </div>
        <label class="applied-row" style="margin-top:10px;color:#444;font-weight:600">
          <input type="checkbox" checked style="accent-color:#0a7f00;margin-right:8px"> Keep me posted about sales and offers
        </label>
      </div>
    </div>

    <div class="cart-ft">
      <div class="total-line">
        <div class="total-left">
          <strong id="totalRupees">₹0</strong>
          <small>Estimated total</small>
        </div>
      </div>
  <button id="checkoutBtn" class="checkout" type="button">Checkout</button>
  </div>
</aside>


<div class="container">
  <h1>SHIPPING AND DELIVERY</h1>

  <div class="qa-block">
    <div class="question">What locations do you deliver to?</div>
    <div class="answer">
      We primarily ship through our channel partner Shiprocket <a href="">(www.shiprocket.in)</a> Our coverage areas are limited to the areas covered by our channel partner.
      <br/><br/>In case your delivery address is not covered by Shiprocket, on request, we will attempt to ship through alternate channel partners for an additional charge.
    </div>
  </div>

  <div class="qa-block">
    <div class="question">How can I track the delivery of my order?</div>
    <div class="answer">
      We usually email you the tracking reference number of your shipment. You can request an update at the Yo! Nutri website <a href=""> (http://www.yonutri.com/pages/track-your-order)</a>  or if you have your reference number you can track it directly on the Shiprocket website <a href="">(www.shiprocket.in)</a>
    </div>
  </div>

  <div class="qa-block">
    <div class="question">Do you charge additional shipping charges?</div>
    <div class="answer">No, we do not currently charge any additional shipping fees for delivery.</div>
  </div>

  <div class="qa-block">
    <div class="question">What is the standard delivery time?</div>
    <div class="answer">Please allow five to seven days for your order to reach. If you are in Hyderabad we’ll probably get your order to you sooner than that. Metro areas usually reach within 4 days.</div>
  </div>

  <div class="qa-block">
    <div class="question">Why is the CoD option not offered in my location?</div>
    <div class="answer">
      The availability of CoD depends on the ability of our courier partner servicing your location to accept cash as payment at the time of delivery.
      <br><br/>Our courier partners have limits on the cash amount payable on delivery depending on the destination and your order value might have exceeded this limit.
    </div>
  </div>

  <div class="qa-block">
    <div class="question">I need to return an item, how do I arrange for a pick-up?</div>
    <div class="answer">Returns are easy. Contact Us to initiate a return. You will receive a call explaining the process, once you have initiated a return.</div>
  </div>
</div>


 <!-- Footer -->
  <footer class="custom-footer">
    <div class="footer-wrapper">
      <div class="footer-column logo-column">
        <div class="logo-circle">
          <img src="images/WhatsApp Image 2025-08-08 at 9.47.38 AM.jpeg" alt="Yo! Nutri Logo" class="protect-copy">
        </div>
        <p>WE’RE A NUTRITION-LED FOOD COMPANY THAT PRIDES ITSELF IN MAKING TASTY AND SIMPLE FOOD THAT’S GOOD FOR YOU. ALL WITHOUT ANY ARTIFICIAL COLOURS, CHEMICALS OR PRESERVATIVES. WE ONLY USE INGREDIENTS YOU CAN SEE AND TASTE. AND THAT’S WHY WE LET THEM DO THE TALKING.<br>GO ON AND TRY SOME!</p>
        <div class="social-icons">
          <a href="https://www.instagram.com/yonutri2024?igsh=amloYjAyaDNkOXpw"><i class="fab fa-instagram"></i></a>
          <a href="https://www.linkedin.com/company/yo-nutri-foods/?originalSubdomain=in"><i class="fab fa-linkedin-in"></i></a>
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
      <div class="footer-column">
        <h4>SHOP</h4>
        <ul>
          <li><a href="index.html">ALL PRODUCTS</a></li>
          <li><a href="index.html">NEW LAUNCHES & OFFERS</a></li>
          <li><a href="#yo-products">PROTEIN</a></li>
          <li><a href="#love-choco">BARS</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>QUICK LINKS</h4>
        <ul>
          <li><a href="ship.html">SHIPPING & DELIVERY</a></li>
          <li><a href="terms and conditions.html">TERMS AND CONDITIONS</a></li>
          <li><a href="privacy.html">PRIVACY POLICY</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>CONTACT US</h4>
                <p>PH: <a href="tel:+917386120893" style="color:aliceblue;">+91-7386120893</a></p>

        <p>AVAILABLE MON TO FRI : 10 AM – 6 PM</p>
        <p>EMAIL: <a href="mailto:listen@yonutri.com" style="color: aliceblue;">listen@yonutri.com</a></p>
        <p>WE TRY TO RESPOND WITHIN 48 HOURS.</p>
      </div>
      <div class="footer-column">
        <h4>OUR STORY</h4>
        <ul><li><a href="our story.html">WHY WE EXIST?</a></li></ul>
      </div>
    </div>
    <hr><p class="quote">WE LET OUR INGREDIENTS DO THE TALKING!</p><hr>
    <div class="footer-payment-container">
    <p class="pay-text">Securely pay using:</p>
    <div class="payment-icons">
      <img src="images/mastercard.png" alt="Mastercard" class="protect-copy">
      <img src="images/visa.png" alt="Visa" class="protect-copy">
      <img src="images/paytm.png" alt="Paytm" class="protect-copy">
      <img src="images/upi.png" alt="UPI" class="protect-copy">
      <img src="images/gpay.png" alt="Google Pay" class="protect-copy">
      <img src="images/phonepe.png" alt="PhonePe"class="protect-copy">
    </div>
  
  </div>
    <div class="footer-bottom"><p>&copy; 2025 Yo! Nutri.</p></div>
  </footer>

<section class="marquee-alt" id="marqueeAlt">
  <div class="marquee-alt__track" id="trackAlt">
    <div class="marquee-alt__content" id="contentAlt">
      <span>IT’S SIMPLE UNTIL YOU MAKE IT COMPLICATED</span>
      <span>WE MAKE HEALTHY EASY</span>
      <span>WE BELIEVE IN KEEPING IT SIMPLE</span>
    </div>
  </div>
</section>


<!-- for not copying a images and matter -->
<script>
  
  
(() => {
  const isInsideProtected = (node) => {
    if (!node) return false;
    const els = document.querySelectorAll('.protect-copy');
    return Array.from(els).some(el => el.contains(node.nodeType === 1 ? node : node.parentNode));
  };

  // Block right-click in protected areas
  document.addEventListener('contextmenu', (e) => {
    if (isInsideProtected(e.target)) e.preventDefault();
  });

  // Block text selection start in protected areas
  document.addEventListener('selectstart', (e) => {
    if (isInsideProtected(e.target)) e.preventDefault();
  });

  // Block dragging (e.g., dragging images) in protected areas
  document.addEventListener('dragstart', (e) => {
    if (isInsideProtected(e.target)) e.preventDefault();
  });

  // Block copy (Ctrl/Cmd+C or Edit → Copy) when selection is inside protected areas
  document.addEventListener('copy', (e) => {
    const sel = window.getSelection && window.getSelection();
    const anchor = sel && sel.anchorNode;
    if (isInsideProtected(anchor)) {
      e.preventDefault();
      // Optional: show a small toast/message instead of alert
      // alert('Copy has been disabled on this content.');
    }
  });

  // Block common shortcuts inside protected areas: Ctrl/Cmd+C, X, S, P, U, A
  document.addEventListener('keydown', (e) => {
    const k = (e.key || '').toLowerCase();
    const combo = e.ctrlKey || e.metaKey;
    if (!combo) return;

    // ignore typing in inputs/textareas/contenteditable
    if (e.target.closest('input, textarea, [contenteditable="true"]')) return;

    const sel = window.getSelection && window.getSelection();
    const inProtected = isInsideProtected(e.target) ||
                        (sel && sel.rangeCount && isInsideProtected(sel.anchorNode));

    if (inProtected && ['c','x','s','p','u','a'].includes(k)) {
      e.preventDefault();
    }
  });
})();
</script>
<script>
  // Shop panel toggle
  document.querySelector('.shop-link').addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('shopPanel').classList.toggle('show');
  });

  // Search bar
  const searchIcon = document.querySelector('.search-icon');
  const searchBar = document.getElementById('searchBar');
  const closeSearch = document.getElementById('closeSearch');
  searchIcon.addEventListener('click', function(e) {
    e.preventDefault();
    searchBar.classList.add('show');
    searchBar.querySelector('input').focus();
  });
  closeSearch.addEventListener('click', function() {
    searchBar.classList.remove('show');
  });

  // Hide/show navbar on scroll
  let lastScrollY = window.scrollY;
  const navbar = document.querySelector('.yonutri-navbar');
  window.addEventListener('scroll', () => {
    if (window.scrollY > lastScrollY) navbar.classList.add('hidden');
    else navbar.classList.remove('hidden');
    lastScrollY = window.scrollY;
  });

  // Bottom marquee loop (minimal)
  (function () {
    const container = document.getElementById('marqueeAlt');
    const track     = document.getElementById('trackAlt');
    const content   = document.getElementById('contentAlt');
    if (!container || !track || !content) return;
    function setup() {
      [...track.children].forEach((el, i) => { if (i) el.remove(); });
      const blockWidth = content.scrollWidth;
      let totalWidth   = blockWidth;
      while (totalWidth < container.clientWidth + blockWidth * 2) {
        track.appendChild(content.cloneNode(true));
        totalWidth += blockWidth;
      }
      track.style.setProperty('--shift', blockWidth + 'px');
      const seconds = Math.max(6, blockWidth / 120);
      track.style.setProperty('--duration', seconds + 's');
    }
    const init = () => setup();
    if (document.fonts && document.fonts.ready) document.fonts.ready.then(init); else window.addEventListener('load', init, { once:true });
    init(); window.addEventListener('resize', setup);
  })();
</script>




<script src="./config.js"></script>
<script>
const API = window.ENV.BACKEND_API

console.log("API URL:", API);


/* -------- Cart drawer with coupon engine (PERSISTENT) -------- */
(() => {
    if (window._yonutriCartInit) return; window._yonutriCartInit = true;
    const drawer = document.getElementById('cart'), overlay = document.getElementById('overlay'), closeBtn = document.getElementById('closeCart'), cartIcon = document.getElementById('cartIcon'), itemsEl = document.getElementById('cartItems'), titleEl = document.getElementById('cartTitle'), totalEl = document.getElementById('totalRupees');
    if (!drawer || !overlay || !itemsEl || !titleEl || !totalEl) return;
    // Updated INR function to remove trailing .00 and format price without decimals
    const INR = n => {
      const num = Number(n);
      if (isNaN(num)) return '₹0';
      // Format without decimals
      return '₹' + Math.floor(num).toLocaleString('en-IN');
    };

    const CART_KEY = 'yonutri_cart_v1';
    const COUPON_KEY = 'yonutri_coupon_v1';

    const loadCart = () => { try { return new Map(JSON.parse(localStorage.getItem(CART_KEY) || '[]')); } catch { return new Map(); } };
    const cart = loadCart(); const saveCart = () => { try { localStorage.setItem(CART_KEY, JSON.stringify([...cart])); } catch { } };

    const applyBtn = document.getElementById('applyCouponBtn');
    const removeBtn = document.getElementById('removeCouponBtn');
    const couponInput = document.getElementById('couponInput');
    const couponMessage = document.getElementById('couponMessage');
    const appliedRow = document.getElementById('appliedRow');
    const appliedSavings = document.getElementById('appliedSavings');
    const couponScroller = document.getElementById('couponScroller');

    let allCoupons = [];

    async function fetchCoupons() {
        try {
            const response = await fetch(`${API}/api/coupons`);
            if (!response.ok) throw new Error('Failed to fetch coupons');
            allCoupons = await response.json();
            renderCouponScroller();
            console.log('Coupons fetched:', allCoupons);
            
        } catch (error) {
            console.error('Error fetching coupons:', error);
        }
    }

    function renderCouponScroller() {
        if (!couponScroller) return;
        couponScroller.innerHTML = allCoupons.map(c => `
            <div class="coupon-card" data-code="${c.code}" style="border: 1px solid #ccc; border-radius: 8px; padding: 10px; cursor: pointer; min-width: 150px;">
                <div style="font-weight: bold;">${c.code}</div>
                <div style="font-size: 12px;">${c.discount_type === 'percent' ? c.discount_amount + '%' : '₹' + c.discount_amount} off</div>
                <div style="font-size: 10px; color: #666;">Min: ₹${c.minimum_amount || 0}</div>
            </div>
        `).join('');
    }

    couponScroller?.addEventListener('click', e => {
        const card = e.target.closest('.coupon-card');
        if (card) {
            couponInput.value = card.dataset.code;
            applyBtn.click();
        }
    });

    function getApplied() { try { return JSON.parse(localStorage.getItem(COUPON_KEY) || 'null'); } catch { return null; } }
    function setApplied(c) { if (!c) localStorage.removeItem(COUPON_KEY); else localStorage.setItem(COUPON_KEY, JSON.stringify(c)); }
    function calcDiscount(subtotal, c) { if (!c) return 0; if (subtotal < (c.minimum_amount || 0)) return 0; let d = c.discount_type === 'percent' ? subtotal * (c.discount_amount / 100) : c.discount_amount; return Math.min(Math.round(d), subtotal); }

    function openCart() { drawer.classList.add('active'); overlay.classList.add('active'); fetchCoupons(); }
    function closeCart() { drawer.classList.remove('active'); overlay.classList.remove('active'); }
    overlay.addEventListener('click', closeCart); closeBtn?.addEventListener('click', closeCart);
    cartIcon?.addEventListener('click', e => { e.preventDefault(); openCart(); });

    applyBtn?.addEventListener('click', () => {
        const enteredCode = couponInput.value.toUpperCase().trim();
        if (!enteredCode) {
            couponMessage.textContent = "Please enter a coupon code.";
            return;
        }

        const coupon = allCoupons.find(c => c.code === enteredCode);

        if (coupon) {
            setApplied(coupon);
            couponMessage.textContent = "";
            render();
        } else {
            couponMessage.textContent = "Invalid coupon code.";
            setApplied(null);
            render();
        }
    });

    removeBtn?.addEventListener('click', () => { setApplied(null); render(); });

    function render() {
        saveCart(); itemsEl.innerHTML = ''; let count = 0, subtotal = 0;

        for (const p of cart.values()) {
            count += p.qty;
            subtotal += p.qty * p.price;
            const variantLabel = p.grams || '';
            itemsEl.insertAdjacentHTML('beforeend', `
          <div class="c-row" data-key="${p.key}">
            <img class="c-thumb" src="${p.img}" alt="">
            <div class="c-mid">
              <h3 class="c-title">${p.title}</h3>
              <div class="c-sub">${variantLabel}</div>
              <div class="qty ${p.qty === 1 ? 'is-single' : ''}">
                <button class="dec" type="button">−</button>
                <span class="count">${p.qty}</span>
                <button class="inc" type="button">+</button>
              </div>
            </div>
            <div class="c-right">
              <div class="c-prices">
                <div class="c-price">${INR(p.price)}</div>
              </div>
              <button class="c-trash" title="Remove"><i class="fa-solid fa-trash"></i></button>
            </div>
          </div>`);
        }

        const applied = getApplied();
        const discount = calcDiscount(subtotal, applied);

        if (applied && discount > 0) {
            appliedRow.style.display = 'flex';
            if (appliedSavings) appliedSavings.textContent = INR(discount);
            couponInput.value = applied.code;
            couponInput.disabled = true;
            applyBtn.style.display = 'none';
            removeBtn.style.display = 'inline-block';
            couponMessage.textContent = "";
        } else {
            appliedRow.style.display = 'none';
            if(applied && discount === 0 && subtotal < (applied.minimum_amount || 0)) {
                couponMessage.textContent = `You need to spend ₹${applied.minimum_amount} to use this coupon.`;
                setApplied(null); // Remove invalid coupon
            }
            couponInput.value = "";
            couponInput.disabled = false;
            applyBtn.style.display = 'inline-block';
            removeBtn.style.display = 'none';
        }


        titleEl.textContent = `Your cart · ${count} ${count === 1 ? 'item' : 'items'}`;
        totalEl.textContent = INR(subtotal - discount);

        if (window.updateCartBadge) window.updateCartBadge(count);
        window.dispatchEvent(new CustomEvent('cart-updated', { detail: { cart: [...cart.values()], subtotal, discount } }));
    }

    itemsEl.addEventListener('click', e => {
        const row = e.target.closest('.c-row'); if (!row) return;
        const key = row.dataset.key; const it = cart.get(key); if (!it) return;
        if (e.target.classList.contains('inc')) it.qty += 1;
        else if (e.target.classList.contains('dec')) it.qty -= 1;
        else if (e.target.closest('.c-trash')) it.qty = 0;
        else return;
        if (it.qty <= 0) cart.delete(key);
        render();
    });

    window.addToCart = function (item, qty = 1) {
        const key = (item.sku || '') + '|' + (item.grams || ''); const exist = cart.get(key);
        if (exist) exist.qty += qty; else cart.set(key, { ...item, key, qty: Math.max(1, qty) });
        render(); openCart();
    };
    window.changeCartQty = function (key, newQty, itemFactory) {
        if (newQty <= 0) { cart.delete(key); render(); return; }
        let it = cart.get(key);
        if (!it) {
            if (typeof itemFactory === 'function') { it = itemFactory(); if (!it) return; it.key = key; it.qty = 0; cart.set(key, it); }
            else return;
        }
        it.qty = newQty; render();
    };
    window.getCartQty = function (key) { const it = cart.get(key); return it ? it.qty : 0; };

    window.addEventListener('storage', (e) => {
        if (e.key === 'yonutri_cart_v1') { try { const arr = JSON.parse(e.newValue || '[]'); cart.clear(); arr.forEach(([k, v]) => cart.set(k, v)); } catch { } render(); }
        if (e.key === 'yonutri_coupon_v1') { render(); }
    });

    render();
    fetchCoupons();
  })();
</script>








<!-- ===== SPECIAL OFFERS cards logic ===== -->
<!-- <script>
(() => {
  const list = document.getElementById('offerList');
  if (!list) return;
  const INR = n => '₹' + Number(n).toLocaleString('en-IN');

  // Add or edit your offers here
  const OFFERS = [
    { sku:'minis4g', title:'Chocolate nut bar', img:'images/CREAMY_Dark_Chocolate-removebg-preview.png', mrp:480, price:432,   grams:'Offer' },
    { sku:'powerup', title:'Roasted nut bar',   img:'images/CREAMY_Dark_Chocolate-removebg-preview.png',  mrp:399, price:359.1, grams:'Offer' },
  ];

  const keyOf = o => `${o.sku}|${o.grams||''}`;
  const qtyOf = o => (window.getCartQty ? window.getCartQty(keyOf(o)) : 0);

  const cardHTML = (o) => {
    const q = qtyOf(o);
    return `
      <div class="offer-card" data-sku="${o.sku}">
        <img class="offer-thumb" src="${o.img}" alt="">
        <div class="offer-title">${o.title}</div>
        <div class="offer-price">
          ${o.mrp ? `<span class="offer-old">${INR(o.mrp)}</span>` : ``}
          <span>${INR(o.price)}</span>
        </div>
        ${
          q > 0
          ? `<div class="offer-qty">
               <button class="dec" type="button">−</button>
               <span class="count">${q}</span>
               <button class="inc" type="button">+</button>
             </div>`
          : `<button class="offer-cta" type="button">+ ADD</button>`
        }
      </div>
    `;
  };

  const render = () => { list.innerHTML = OFFERS.map(cardHTML).join(''); };

  list.addEventListener('click', e => {
    const card  = e.target.closest('.offer-card'); if (!card) return;
    const offer = OFFERS.find(o => o.sku === card.dataset.sku); if (!offer) return;
    const key   = keyOf(offer);
    const cur   = qtyOf(offer);

    if (e.target.classList.contains('offer-cta')) {
      window.addToCart && window.addToCart({
        sku: offer.sku, grams: offer.grams || 'Special Offer',
        title: offer.title, price: offer.price, img: offer.img
      });
    } else if (e.target.classList.contains('inc')) {
      window.changeCartQty && window.changeCartQty(key, cur + 1, () => ({
        sku: offer.sku, grams: offer.grams || 'Special Offer',
        title: offer.title, price: offer.price, img: offer.img
      }));
    } else if (e.target.classList.contains('dec')) {
      window.changeCartQty && window.changeCartQty(key, cur - 1);
    }

    render();
  });

  window.addEventListener('cart-updated', render);
  render();
})();
</script> -->


<script>



(() => {
  const list = document.getElementById('offerList');
  if (!list) return;
  const INR = n => '₹' + Number(n).toLocaleString('en-IN');

  const OFFERS = [
    { sku:'minis4g', title:'CREAMY - Dark Chocolate Peanut Butter 350gms',    img:'images/CREAMY_Dark_Chocolate-removebg-preview.png',    price:299,   grams:'offer' },
    { sku:'powerup', title:'CREAMY - Peanut Butter With Dates 350gms',      img:'images/CREAMY_Dates-removebg-preview.png',      price:299, grams:'Offer' },
    { sku:'crunchy1', title:'CREAMY - Jaggery Peanut Butter 350gms',  img:'images/CREAMY_Jaggery-removebg-preview.png',      price:299,   grams:'Offer' },
    { sku:'creamy1',  title:'CREAMY - Unsweetened Peanut Butter 350gms',   img:'images/CREAMY_Unsweetened-removebg-preview.png',       price:299,   grams:'Offer' },
    { sku:'dates1',   title:'CRUNCHY - Dark Chocolate Peanut Butter 350gms',    img:'images/CRUNCHY_Dark_Chocolate-removebg-preview.png',        price:299,   grams:'Offer' },
    { sku:'dark1',    title:'CRUNCHY - Peanut Butter With Dates 350gms',   img:'images/CRUNCHY_Dates-removebg-preview.png',         price:299,   grams:'Offer' },
    { sku:'unsweet1', title:'CRUNCHY - Jaggery Peanut Butter',      img:'images/CRUNCHY_Jaggery-removebg-preview.png',      price:299,   grams:'Offer' },
    { sku:'combo1',   title:'CRUNCHY - Unsweetened Peanut Butter 350gms',   img:'images/CRUNCHY_Unsweetened-removebg-preview.png',    price:299,   grams:'Offer' },
  ];

  const keyOf = o => `${o.sku}|${o.grams||''}`;
  const qtyOf = o => (window.getCartQty ? window.getCartQty(keyOf(o)) : 0);

  const cardHTML = (o) => {
    const q = qtyOf(o);
    return `
      <div class="offer-card" data-sku="${o.sku}">
        <img class="offer-thumb" src="${o.img}" alt="">
        <div class="offer-title">${o.title}</div>
        <div class="offer-price">
          ${o.mrp ? `<span class="offer-old">${INR(o.mrp)}</span>` : ``}
          <span>${INR(o.price)}</span>
        </div>
        ${
          q > 0
          ? `<div class="offer-qty">
               <button class="dec" type="button">−</button>
               <span class="count">${q}</span>
               <button class="inc" type="button">+</button>
             </div>`
          : `<button class="offer-cta" type="button">+ ADD</button>`
        }
      </div>
    `;
  };

  const render = () => { list.innerHTML = OFFERS.map(cardHTML).join(''); };

  list.addEventListener('click', e => {
    const card  = e.target.closest('.offer-card'); if (!card) return;
    const offer = OFFERS.find(o => o.sku === card.dataset.sku); if (!offer) return;
    const key   = keyOf(offer);
    const cur   = qtyOf(offer);

    if (e.target.classList.contains('offer-cta')) {
      window.addToCart && window.addToCart({
        sku: offer.sku, grams: offer.grams || 'Special Offer',
        title: offer.title, price: offer.price, img: offer.img
      });
    } else if (e.target.classList.contains('inc')) {
      window.changeCartQty && window.changeCartQty(key, cur + 1, () => ({
        sku: offer.sku, grams: offer.grams || 'Special Offer',
        title: offer.title, price: offer.price, img: offer.img
      }));
    } else if (e.target.classList.contains('dec')) {
      window.changeCartQty && window.changeCartQty(key, cur - 1);
    }

    render();
  });

  window.addEventListener('cart-updated', render);
  render();
})();




</script>


<script>
(() => {
  const header   = document.querySelector('.yonutri-navbar') || document.querySelector('header');
  const drawer   = document.getElementById('shopDrawer');
  const openBtn  = document.getElementById('hamburgerBtn');
  const closeBtn = document.getElementById('closeShopDrawer');
  const overlay  = document.getElementById('overlay');
  const TRANS_MS = 320;

  function placeSheetUnderHeader(){
    const rect = header ? header.getBoundingClientRect() : { bottom: 0 };
    const top  = Math.max(0, rect.bottom) + 8; // 8px gap
    drawer.style.setProperty('--sheet-top', `${top}px`);
  }

  function open() {
    placeSheetUnderHeader();
    drawer.classList.add('open');
    overlay.classList.add('show');
    drawer.setAttribute('aria-hidden','false');
    overlay.setAttribute('aria-hidden','false');
    document.documentElement.classList.add('modal-open');
    document.body.classList.add('modal-open');
    (closeBtn || drawer).focus();
    openBtn?.setAttribute('aria-expanded','true');
  }

  function close() {
    // return focus FIRST to avoid aria-hidden warning
    openBtn?.focus();

    drawer.classList.remove('open');
    overlay.classList.remove('show');
    openBtn?.setAttribute('aria-expanded','false');
    document.documentElement.classList.remove('modal-open');
    document.body.classList.remove('modal-open');

    setTimeout(() => {
      drawer.setAttribute('aria-hidden','true');
      overlay.setAttribute('aria-hidden','true');
    }, TRANS_MS);
  }

  // events
  openBtn?.addEventListener('click', open);
  closeBtn?.addEventListener('click', close);
  overlay?.addEventListener('click', close);
  window.addEventListener('keydown', e => { if (e.key === 'Escape' && drawer.classList.contains('open')) close(); });

  // keep the sheet glued under the header on rotate/resize/scroll
  ['resize','orientationchange','scroll'].forEach(evt => window.addEventListener(evt, () => {
    if (drawer.classList.contains('open')) placeSheetUnderHeader();
  }));

  // close when tapping in-page anchors
  drawer.addEventListener('click', (e) => {
    const a = e.target.closest('a.category-item');
    if (a && (a.getAttribute('href')||'').startsWith('#')) close();
  });
})();
</script>
<script src="script.js"></script>

</body>
</html>
