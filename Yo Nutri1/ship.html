<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yo Nutri!</title>

  <!-- Fonts / Icons / Bootstrap -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">   
  <link rel="stylesheet" href="ship.css">
  <link rel="stylesheet" href="style.css">

  <!-- ===== cart look like your 2nd screenshot ===== -->
  <style>
    :root{
      --border:#e9e9e9; --ink:#1f1f1f; --muted:#6f6f6f;
      --accent:#0a7f00; --pill:#121212; --brand:#ffb347;
    }

    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);opacity:0;pointer-events:none;transition:.25s;z-index:1001}
    .overlay.active{opacity:1;pointer-events:auto}
    .cart{position:fixed;top:0;right:0;bottom:0;width:392px;max-width:88vw;background:#fff;
      transform:translateX(110%);transition:.3s ease;z-index:1002;display:grid;
      grid-template-rows:auto 1fr auto;border-left:1px solid var(--border)}
    .cart.active{transform:translateX(0)}

    .cart-hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
    .cart-title{display:flex;align-items:center;gap:10px;font-weight:800;font-size:16px}
    .cart-close{cursor:pointer;font-size:18px;color:#222}

    .cart-bd{padding:14px 14px 0;overflow:auto;scrollbar-width:none}
    .cart-bd::-webkit-scrollbar{width:0;height:0}

    .c-items{display:flex;flex-direction:column;gap:12px;margin-bottom:12px}
    .c-row{
      display:grid;grid-template-columns:56px 1fr auto;gap:12px;align-items:start;
      background:#fff;border:1px solid #ededed;border-radius:16px;padding:12px;
      box-shadow:0 1px 0 rgba(0,0,0,.03) inset;
    }
    .c-thumb{width:56px;height:56px;object-fit:contain;border-radius:10px;background:#f7f7f7}
    .c-mid{min-width:0}
    .c-title{margin:0;font-size:14px;line-height:1.3;font-weight:800;color:#1f1f1f}
    .c-sub{font-size:12px;color:var(--muted);margin:6px 0 8px}
    .c-right{display:flex;align-items:center;gap:8px}
    .c-prices{display:flex;flex-direction:column;align-items:flex-end;line-height:1.05;min-width:70px}
    .c-price{font-weight:900;font-size:14px;color:#1f1f1f}
    .c-trash{border:none;background:transparent;color:#b5b5b5;width:30px;height:30px;border-radius:8px;cursor:pointer}
    .c-trash:hover{color:#222}

    .qty{display:inline-flex;align-items:center;gap:0;border:1.5px solid #121212;border-radius:9999px;padding:4px;background:#fff;height:34px}
    .qty .dec,.qty .inc{
      border:0;cursor:pointer;height:26px;min-width:32px;border-radius:8px;
      font-weight:900;font-size:16px;display:flex;align-items:center;justify-content:center;
    }
    .qty .dec{background:#efefef;color:#222}
    .qty.is-single .dec{background:#f3f3f3;color:#9a9a9a}
    .qty .count{width:28px;text-align:center;font-weight:700;font-size:14px;color:#1f1f1f}
    .qty .inc{background:#3e2723;color:#fff}

    .cart-section{border-top:1px solid var(--border);margin:14px -14px 0;padding:10px}
    .sec-title{font-weight:800;font-size:14px;margin:0 0 12px}

    .coupon-band{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      border:1px solid #e7efe7;border-radius:14px;padding:14px 16px;background:#fff
    }
    .coupon-left{display:flex;align-items:center;gap:10px}
    .coupon-left .icon{width:22px;height:22px;display:grid;place-items:center;border-radius:999px;background:#e9f7ea;color:#138a00}
    .coupon-text{display:flex;flex-direction:column;line-height:1.2}
    .coupon-main{font-weight:800;color:#138a00;font-size:14px}
    .coupon-sub{font-size:12px;color:#666}
    .coupon-apply{padding:6px 12px;border:1px solid #cfd8cf;border-radius:12px;background:#fff;font-weight:800;font-size:12px;cursor:pointer}
    .applied-row{display:flex;align-items:center;gap:8px;color:#0a7f00;font-weight:700;font-size:13px;margin-top:10px}
    .applied-row i{color:#0a7f00}

    .offers-wrap{border:1px solid var(--border);border-radius:14px;padding:12px;background:#fff}
    .offers-head{font-weight:800;color:#138a00;margin:0 0 10px}
    .offer-list{display:flex;gap:12px;overflow:auto;padding-bottom:6px;scroll-snap-type:x mandatory}
    .offer-card{flex:0 0 150px;border:1px solid #e9e9e9;border-radius:14px;padding:10px;display:flex;flex-direction:column;gap:8px;background:#fff;scroll-snap-align:start}
    .offer-thumb{width:100%;height:76px;object-fit:cover;background:#f7f7f7;border-radius:10px}
    .offer-title{font-size:12px;font-weight:800;line-height:1.2;min-height:32px}
    .offer-price{display:flex;align-items:center;justify-content:space-between;font-size:12px}
    .offer-old{text-decoration:line-through;color:#777}
    .offer-cta,.offer-qty{height:32px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:900;cursor:pointer}
    .offer-cta{border:1px solid #2b8a00;background:#fff}
    .offer-qty{border:1.5px solid #121212;gap:6px;padding:0 4px}
    .offer-qty .dec,.offer-qty .inc{height:26px;min-width:28px;border:0;border-radius:8px;font-weight:900;font-size:14px;display:flex;align-items:center;justify-content:center;cursor:pointer}
    .offer-qty .dec{background:#e9e9e9}
    .offer-qty .inc{background:#16271b;color:#fff}
    .offer-qty .count{min-width:20px;text-align:center;font-weight:800}

    .cart-ft{border-top:1px solid var(--border);background:#fff;padding:12px 14px;display:grid;gap:10px}
    .total-line{display:flex;align-items:center;justify-content:space-between}
    .total-left small{color:#666}
    .checkout{width:100%;background:#FFA500;color:#fff;border:none;border-radius:9999px;padding:12px 16px;font-weight:900;cursor:pointer}

    .cart-badge{position:absolute;top:-6px;right:-8px;min-width:18px;height:18px;padding:0 5px;border-radius:9999px;display:inline-flex;align-items:center;justify-content:center;background:#0a7f00;color:#fff;font-weight:900;font-size:11px;line-height:18px;box-shadow:0 1px 0 rgba(0,0,0,.15)}
    .cart-badge[hidden]{display:none !important}
    @keyframes cb-pop{0%{transform:scale(.6)}50%{transform:scale(1.15)}100%{transform:scale(1)}}
    .cart-badge.pop{animation:cb-pop .28s ease}
  </style>
</head>
<body>

<header class="yonutri-navbar">
  <div class="navbar-top">
    <div class="nav-left">
      <a href="#" class="shop-link"><i class="fas fa-arrow-up-right-from-square"></i> SHOP</a>
                       <button id="hamburgerBtn" class="hamburger"><i class="fas fa-bars"></i>MENU</button>

    </div>
    <div class="nav-center">
      <a href="/" class="logo-link">
        <img src="images/WhatsApp Image 2025-08-08 at 9.47.38 AM.jpeg" alt="Yo Nutri Logo" class="nav-logo" />
      </a>
    </div>
    <div class="nav-right">
      <a href="#" class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></a>
      <a href="/login.html"><i class="fa-solid fa-user"></i></a>
      <a href="#" id="cartIcon">CART <i class="header-icon fa-solid fa-cart-shopping"></i></a>
    </div>
  </div>
  <div class="search-bar" id="searchBar">
    <input type="text" placeholder="Search" />
    <span class="close-search" id="closeSearch">&times;</span>
  </div>
</header>

<div class="shop-panel" id="shopPanel">
  <div class="shop-panel-content">
    <a href="#" class="shop-link"><div class="shop-sidebar"><h5>SHOP BY CATEGORY</h5></div></a>
    <div class="category-grid">
      <a href="index.html" class="shop-link"><div class="category-item"><span>New Launches & Offers</span><img src="images/chocolate1.png" alt=""></div></a>
      <a href="index.html" class="shop-link"><div class="category-item"><span>All Products</span><img src="images/image (2).png" alt=""></div></a>
      <a href="index.html" class="shop-link"><div class="category-item"><span>Protein</span><img src="images/chocolate6.jpg" alt=""></div></a>
      <a href="index.html#love-choco" class="shop-link"><div class="category-item"><span>Bars</span><img src="images/roasted6.jpg" alt=""></div></a>
      <a href="index.html#yo-products" class="shop-link"><div class="category-item"><span>All Peanut Butter</span><img src="images/CREAMY_Dark_Chocolate-removebg-preview.png" alt=""></div></a>
      <a href="index.html#yo-products" class="shop-link"><div class="category-item"><span>Peanut Butter Creamy</span><img src="images/CREAMY_Dates-removebg-preview.png" alt=""></div></a>
      <a href="index.html#yo-producrs" class="shop-link"><div class="category-item"><span>Peanut Butter Crunchy</span><img src="images/CRUNCHY_Dark_Chocolate-removebg-preview.png" alt=""></div></a>
      <a href="index.html#yo-products" class="shop-link"><div class="category-item"><span>Protein Bundle</span><img src="images/chocolate7.jpg" alt=""></div></a>
    </div>
  </div>
</div>





<!-- Shop Drawer -->
<aside class="shop-drawer" id="shopDrawer">
  <div class="shop-drawer-header">
    <h4>SHOP BY CATEGORY</h4>
    <i class="fa-solid fa-xmark" id="closeShopDrawer"></i> 
  </div>
  <div class="shop-drawer-body">
    <a href="#yn-love" class="category-item">
      <img src="images/image (1).png" alt="">
      <span>New Launches & Offers</span>
    </a>
    <a href="" class="category-item">
      <img src="images/image (2).png" alt="">
      <span>All Products</span>
    </a>
    <a href="" class="category-item">
      <img src="images/chocolate6.jpg" alt="">
      <span>Protein</span>
    </a>
    <a href="#yn-love" class="category-item">
      <img src="images/roasted6.jpg" alt="">
      <span>Bars</span>
    </a>
    <a href="#yn-love" class="category-item">
      <span>All Peanut Butter</span><img src="images/CREAMY_Dark_Chocolate-removebg-preview.png" alt="">
    </a>
    <a href="##yn-love" class="category-item">
      <span>Protein Bundle</span><img src="images/chocolate7.jpg" alt="">
    </a>
    <a href="#yn-love" class="category-item"><span>Peanut Butter Creamy</span>
      <img src="images/CREAMY_Dates-removebg-preview.png" alt=""></a>
        <a href="#yo-products" class="category-item"><span>Peanut Butter Crunchy</span>
          <img src="images/CRUNCHY_Dark_Chocolate-removebg-preview.png" alt=""></a>
    <!-- ... repeat categories ... -->
  </div>
</aside>
<!-- Overlay (ADD THIS) -->
<div class="overlay" id="overlay" tabindex="-1" aria-hidden="true"></div>







<div class="overlay" id="overlay"></div>

<aside class="cart" id="cart">
  <div class="cart-hd">
    <div class="cart-title"><i class="fa-solid fa-cart-shopping"></i><span id="cartTitle">Your cart · 0 item</span></div>
    <i class="fa-solid fa-xmark cart-close" id="closeCart" title="Close"></i>
  </div>

  <div class="cart-bd">
    <div class="c-items" id="cartItems"></div>

    <div class="cart-section">
      <div class="sec-title">Offers & Rewards</div>

      <div id="couponBand" class="coupon-band"
           data-code="SUMMER10" data-type="percent" data-amount="10" data-min="0" style="display:none">
        <div class="coupon-left">
          <div class="icon"><i class="fa-solid fa-badge-percent"></i></div>
          <div class="coupon-text">
            <span id="couponMain" class="coupon-main">Save ₹0</span>
            <span class="coupon-sub">with '<b>SUMMER10</b>'</span>
            <span class="coupon-sub">View other coupons ›</span>
          </div>
        </div>
        <button id="applyCouponBtn" class="coupon-apply" type="button">Apply</button>
      </div>

      <div id="appliedRow" class="applied-row" style="display:none">
        <i class="fa-regular fa-circle-check"></i>
        <span><span id="appliedSavings">₹0</span> total savings · 1 applied</span>
        <button id="removeCouponBtn" class="coupon-apply" type="button">Remove</button>
      </div>
    </div>

    <div class="cart-section">
      <div class="offers-wrap">
        <div class="offers-head">Special Offers For You</div>
        <div class="offer-list" id="offerList"></div>
      </div>
      <label class="applied-row" style="margin-top:10px;color:#444;font-weight:600">
        <input type="checkbox" checked style="accent-color:#0a7f00;margin-right:8px"> Keep me posted about sales and offers
      </label>
    </div>
  </div>

  <div class="cart-ft">
    <div class="total-line">
      <div class="total-left">
        <strong id="totalRupees">₹0</strong>
        <small>Estimated total</small>
      </div>
    </div>
    <button id="checkoutBtn" class="checkout" type="button">Checkout</button>
  </div>
</aside>

<div class="container">
  <h1>SHIPPING AND DELIVERY</h1>

  <div class="qa-block">
    <div class="question">What locations do you deliver to?</div>
    <div class="answer">
      We primarily ship through our channel partner xyz (url) Our coverage areas are limited to the areas covered by our channel partner.
      <br/><br/>In case your delivery address is not covered by xyz, on request, we will attempt to ship through alternate channel partners for an additional charge.
    </div>
  </div>

  <div class="qa-block">
    <div class="question">How can I track the delivery of my order?</div>
    <div class="answer">
      We usually email you the tracking reference number of your shipment. You can request an update at the Yo! Nutri website (http://www.yonutri.com/pages/track-your-order) or if you have your reference number you can track it directly on the xyz website http://www.xyz.com/#.
    </div>
  </div>

  <div class="qa-block">
    <div class="question">Do you charge additional shipping charges?</div>
    <div class="answer">No, we do not currently charge any additional shipping fees for delivery.</div>
  </div>

  <div class="qa-block">
    <div class="question">What is the standard delivery time?</div>
    <div class="answer">Please allow five to seven days for your order to reach. If you are in Hyderabad we’ll probably get your order to you sooner than that. Metro areas usually reach within 4 days.</div>
  </div>

  <div class="qa-block">
    <div class="question">Why is the CoD option not offered in my location?</div>
    <div class="answer">
      The availability of CoD depends on the ability of our courier partner servicing your location to accept cash as payment at the time of delivery.
      <br><br/>Our courier partners have limits on the cash amount payable on delivery depending on the destination and your order value might have exceeded this limit.
    </div>
  </div>

  <div class="qa-block">
    <div class="question">I need to return an item, how do I arrange for a pick-up?</div>
    <div class="answer">Returns are easy. Contact Us to initiate a return. You will receive a call explaining the process, once you have initiated a return.</div>
  </div>
</div>

 <!-- Footer -->
  <footer class="custom-footer">
    <div class="footer-wrapper">
      <div class="footer-column logo-column">
        <div class="logo-circle">
          <img src="images/WhatsApp Image 2025-08-08 at 9.47.38 AM.jpeg" alt="Yo! Nutri Logo">
        </div>
        <p>WE’RE A NUTRITION-LED FOOD COMPANY THAT PRIDES ITSELF IN MAKING TASTY AND SIMPLE FOOD THAT’S GOOD FOR YOU. ALL WITHOUT ANY ARTIFICIAL COLOURS, CHEMICALS OR PRESERVATIVES. WE ONLY USE INGREDIENTS YOU CAN SEE AND TASTE. AND THAT’S WHY WE LET THEM DO THE TALKING.<br>GO ON AND TRY SOME!</p>
        <div class="social-icons">
          <a href="https://www.instagram.com/yonutri2024?igsh=amloYjAyaDNkOXpw"><i class="fab fa-instagram"></i></a>
          <a href="https://www.linkedin.com/company/yo-nutri-foods/?originalSubdomain=in"><i class="fab fa-linkedin-in"></i></a>
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
      <div class="footer-column">
        <h4>SHOP</h4>
        <ul>
          <li><a href="index.html">ALL PRODUCTS</a></li>
          <li><a href="index.html">NEW LAUNCHES & OFFERS</a></li>
          <li><a href="#yo-products">PROTEIN</a></li>
          <li><a href="#love-choco">BARS</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>QUICK LINKS</h4>
        <ul>
          <li><a href="ship.html">SHIPPING & DELIVERY</a></li>
          <li><a href="terms and conditions.html">TERMS AND CONDITIONS</a></li>
          <li><a href="privacy.html">PRIVACY POLICY</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>CONTACT US</h4>
                <p>PH: <a href="tel:+917386120893" style="color:aliceblue;">+91-7386120893</a></p>

        <p>AVAILABLE MON TO FRI : 10 AM – 6 PM</p>
        <p>EMAIL: <a href="mailto:listen@yonutri.com" style="color: aliceblue;">listen@yonutri.com</a></p>
        <p>WE TRY TO REPOND WITHIN 48 HOURS.</p>
      </div>
      <div class="footer-column">
        <h4>OUR STORY</h4>
        <ul><li><a href="our story.html">WHY WE EXIST?</a></li></ul>
      </div>
    </div>
    <hr><p class="quote">WE LET OUR INGREDIENTS DO THE TALKING!</p><hr>
    <div class="footer-bottom"><p>&copy; 2025 Yo! Nutri.</p></div>
  </footer>

<section class="marquee-alt" id="marqueeAlt">
  <div class="marquee-alt__track" id="trackAlt">
    <div class="marquee-alt__content" id="contentAlt">
      <span>IT’S SIMPLE UNTIL YOU MAKE IT COMPLICATED</span>
      <span>WE MAKE HEALTHY EASY</span>
      <span>WE BELIEVE IN KEEPING IT SIMPLE</span>
    </div>
  </div>
</section>

<script>
  // Shop panel toggle
  document.querySelector('.shop-link').addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('shopPanel').classList.toggle('show');
  });

  // Search bar
  const searchIcon = document.querySelector('.search-icon');
  const searchBar = document.getElementById('searchBar');
  const closeSearch = document.getElementById('closeSearch');
  searchIcon.addEventListener('click', function(e) {
    e.preventDefault();
    searchBar.classList.add('show');
    searchBar.querySelector('input').focus();
  });
  closeSearch.addEventListener('click', function() {
    searchBar.classList.remove('show');
  });

  // Hide/show navbar on scroll
  let lastScrollY = window.scrollY;
  const navbar = document.querySelector('.yonutri-navbar');
  window.addEventListener('scroll', () => {
    if (window.scrollY > lastScrollY) navbar.classList.add('hidden');
    else navbar.classList.remove('hidden');
    lastScrollY = window.scrollY;
  });

  // Bottom marquee loop (minimal)
  (function () {
    const container = document.getElementById('marqueeAlt');
    const track     = document.getElementById('trackAlt');
    const content   = document.getElementById('contentAlt');
    if (!container || !track || !content) return;
    function setup() {
      [...track.children].forEach((el, i) => { if (i) el.remove(); });
      const blockWidth = content.scrollWidth;
      let totalWidth   = blockWidth;
      while (totalWidth < container.clientWidth + blockWidth * 2) {
        track.appendChild(content.cloneNode(true));
        totalWidth += blockWidth;
      }
      track.style.setProperty('--shift', blockWidth + 'px');
      const seconds = Math.max(6, blockWidth / 120);
      track.style.setProperty('--duration', seconds + 's');
    }
    const init = () => setup();
    if (document.fonts && document.fonts.ready) document.fonts.ready.then(init); else window.addEventListener('load', init, { once:true });
    init(); window.addEventListener('resize', setup);
  })();
</script>

<!-- ===== Shared cart logic with global helpers for offers ===== -->
<script>
(function sharedCart(){
  const CART_KEY   = 'yonutri_cart_v1';
  const COUPON_KEY = 'yonutri_coupon_v1';

  const drawer  = document.getElementById('cart');
  const overlay = document.getElementById('overlay');
  const closeBtn= document.getElementById('closeCart');
  const cartIcon= document.getElementById('cartIcon');
  const itemsEl = document.getElementById('cartItems');
  const titleEl = document.getElementById('cartTitle');
  const totalEl = document.getElementById('totalRupees');

  if (!drawer || !overlay || !itemsEl || !titleEl || !totalEl) return;

  // Badge on header icon
  (function ensureBadge(){
    const iconEl = cartIcon.querySelector('.header-icon') || cartIcon;
    iconEl.style.position = 'relative';
    let badge = document.getElementById('cartBadge');
    if (!badge){
      badge = document.createElement('span');
      badge.id = 'cartBadge';
      badge.className = 'cart-badge';
      badge.hidden = true;
      badge.textContent = '0';
      iconEl.appendChild(badge);
    }
    window.updateCartBadge = function(count){
      const n = Math.max(0, Number(count) || 0);
      badge.hidden = n === 0;
      badge.textContent = n > 99 ? '99+' : String(n);
      badge.classList.remove('pop'); void badge.offsetWidth; badge.classList.add('pop');
    };
  })();

  const INR = (n) => '₹' + Math.max(0, Math.round(Number(n)||0)).toLocaleString('en-IN');
  const keyOf = (p) => p.key ? p.key : ((p.sku||'') + '|' + (p.grams||''));

  const loadCart = () => { try { return new Map(JSON.parse(localStorage.getItem(CART_KEY)||'[]')); } catch { return new Map(); } };
  const saveCart = (map) => { try { localStorage.setItem(CART_KEY, JSON.stringify([...map])); } catch {} };

  const getAppliedCoupon = () => { try { return JSON.parse(localStorage.getItem(COUPON_KEY)||'null'); } catch { return null; } };
  const setAppliedCoupon = (c) => { if (!c) localStorage.removeItem(COUPON_KEY); else localStorage.setItem(COUPON_KEY, JSON.stringify(c)); };

  function computeDiscount(subtotal, coupon){
    if (!coupon) return 0;
    if (subtotal < (coupon.min||0)) return 0;
    let d = coupon.type === 'percent' ? subtotal * (coupon.amount/100) : coupon.amount;
    return Math.min(Math.round(d), subtotal);
  }

  function openCart(){ drawer.classList.add('active'); overlay.classList.add('active'); }
  function closeCart(){ drawer.classList.remove('active'); overlay.classList.remove('active'); }
  overlay.addEventListener('click', closeCart);
  closeBtn?.addEventListener('click', closeCart);
  cartIcon?.addEventListener('click', e => { e.preventDefault(); openCart(); });

  // Expose simple helpers so the offers section can interact with the cart
  window.getCartQty = function(key){
    const cart = loadCart();
    const it = cart.get(String(key));
    return it ? (it.qty||0) : 0;
  };

  window.addToCart = function(p){
    const cart = loadCart();
    const key = keyOf(p);
    const cur = cart.get(key) || {...p, qty:0};
    cur.qty += 1;
    cart.set(key, cur);
    saveCart(cart);
    render();
    openCart(); // open drawer after add
  };

  // change qty by absolute value; if ensureObj provided and item missing, create it
  window.changeCartQty = function(key, qty, ensureObj){
    const cart = loadCart();
    let it = cart.get(key);
    if (!it && typeof ensureObj === 'function'){
      it = {...ensureObj(), qty:0};
    }
    if (!it) return; // nothing to change
    if (qty <= 0) cart.delete(key);
    else { it.qty = qty; cart.set(key, it); }
    saveCart(cart);
    render();
  };

  // Render cart DOM
  function render(){
    const cart = loadCart();
    itemsEl.innerHTML = '';
    let count = 0, subtotal = 0;

    for (const p of cart.values()){
      count += p.qty;
      subtotal += p.qty * (Number(p.price)||0);
      const key = keyOf(p);
      const variantLabel = /^\d+$/.test(String(p.grams)) ? `${p.grams} g` : (p.grams||'');
      itemsEl.insertAdjacentHTML('beforeend', `
        <div class="c-row" data-key="${key}">
          <img class="c-thumb" src="${p.img}" alt="">
          <div class="c-mid">
            <h3 class="c-title">${p.title}</h3>
            <div class="c-sub">${variantLabel}</div>
            <div class="qty ${p.qty===1 ? 'is-single' : ''}">
              <button class="dec" type="button" aria-label="Decrease">−</button>
              <span class="count">${p.qty}</span>
              <button class="inc" type="button" aria-label="Increase">+</button>
            </div>
          </div>
          <div class="c-right">
            <div class="c-prices"><div class="c-price">${INR(p.price)}</div></div>
            <button class="c-trash" title="Remove"><i class="fa-solid fa-trash"></i></button>
          </div>
        </div>
      `);
    }

    const applied = getAppliedCoupon();
    const discount = computeDiscount(subtotal, applied);

    // Coupon preview row visibility
    const bandEl = document.getElementById('couponBand');
    const couponMainEl = document.getElementById('couponMain');
    if (bandEl){
      const bandCoupon = {
        code:(bandEl.dataset.code||'').trim(),
        type:(bandEl.dataset.type||'flat').toLowerCase(),
        amount:Number(bandEl.dataset.amount||0),
        min:Number(bandEl.dataset.min||0)
      };
      const preview = computeDiscount(subtotal, bandCoupon);
      if (couponMainEl) couponMainEl.textContent = `Save ${INR(preview)}`;
      bandEl.style.display = (!applied && subtotal >= bandCoupon.min) ? 'flex' : 'none';
    }

    const appliedRow = document.getElementById('appliedRow');
    const appliedSavingsEl = document.getElementById('appliedSavings');
    if (appliedRow){
      if (applied && discount > 0){
        appliedRow.style.display = 'flex';
        if (appliedSavingsEl) appliedSavingsEl.textContent = INR(discount);
      } else {
        appliedRow.style.display = 'none';
        if (applied) localStorage.removeItem(COUPON_KEY);
      }
    }

    titleEl.textContent = `Your cart · ${count} ${count===1?'item':'items'}`;
    totalEl.textContent  = INR(subtotal - discount);

    if (window.updateCartBadge) window.updateCartBadge(count);
    // Let other widgets (offers) react
    window.dispatchEvent(new CustomEvent('cart-updated',{detail:{cart:[...loadCart().values()], subtotal, discount}}));
  }

  // Item row interactions
  itemsEl.addEventListener('click', e=>{
    const row = e.target.closest('.c-row'); if(!row) return;
    const key = row.dataset.key;
    const cart = loadCart();
    const it = cart.get(key);
    if (!it) return;

    if (e.target.classList.contains('inc'))      it.qty += 1;
    else if (e.target.classList.contains('dec')) it.qty -= 1;
    else if (e.target.closest('.c-trash'))       it.qty = 0;
    else return;

    if (it.qty <= 0) cart.delete(key); else cart.set(key, it);
    saveCart(cart);
    render();
  });

  // Coupon buttons
  document.getElementById('applyCouponBtn')?.addEventListener('click', () => {
    const bandEl = document.getElementById('couponBand');
    if (!bandEl) return;
    const c = {
      code:(bandEl.dataset.code||'').trim(),
      type:(bandEl.dataset.type||'flat').toLowerCase(),
      amount:Number(bandEl.dataset.amount||0),
      min:Number(bandEl.dataset.min||0)
    };
    if (c.code) setAppliedCoupon(c);
    render();
  });
  document.getElementById('removeCouponBtn')?.addEventListener('click', () => {
    setAppliedCoupon(null); render();
  });

  // live sync
  window.addEventListener('storage', (e) => {
    if (e.key === CART_KEY || e.key === COUPON_KEY) render();
  });

  render();
})();
</script>

<!-- ===== SPECIAL OFFERS cards logic ===== -->
<script>
(() => {
  const list = document.getElementById('offerList');
  if (!list) return;
  const INR = n => '₹' + Number(n).toLocaleString('en-IN');

  // Add or edit your offers here
  const OFFERS = [
    { sku:'minis4g', title:'Chocolate nut bar', img:'images/chocolate6.jpg', mrp:480, price:432,   grams:'Offer' },
    { sku:'powerup', title:'Roasted nut bar',   img:'images/roasted6.jpg',  mrp:399, price:359.1, grams:'Offer' },
  ];

  const keyOf = o => `${o.sku}|${o.grams||''}`;
  const qtyOf = o => (window.getCartQty ? window.getCartQty(keyOf(o)) : 0);

  const cardHTML = (o) => {
    const q = qtyOf(o);
    return `
      <div class="offer-card" data-sku="${o.sku}">
        <img class="offer-thumb" src="${o.img}" alt="">
        <div class="offer-title">${o.title}</div>
        <div class="offer-price">
          ${o.mrp ? `<span class="offer-old">${INR(o.mrp)}</span>` : ``}
          <span>${INR(o.price)}</span>
        </div>
        ${
          q > 0
          ? `<div class="offer-qty">
               <button class="dec" type="button">−</button>
               <span class="count">${q}</span>
               <button class="inc" type="button">+</button>
             </div>`
          : `<button class="offer-cta" type="button">+ ADD</button>`
        }
      </div>
    `;
  };

  const render = () => { list.innerHTML = OFFERS.map(cardHTML).join(''); };

  list.addEventListener('click', e => {
    const card  = e.target.closest('.offer-card'); if (!card) return;
    const offer = OFFERS.find(o => o.sku === card.dataset.sku); if (!offer) return;
    const key   = keyOf(offer);
    const cur   = qtyOf(offer);

    if (e.target.classList.contains('offer-cta')) {
      window.addToCart && window.addToCart({
        sku: offer.sku, grams: offer.grams || 'Special Offer',
        title: offer.title, price: offer.price, img: offer.img
      });
    } else if (e.target.classList.contains('inc')) {
      window.changeCartQty && window.changeCartQty(key, cur + 1, () => ({
        sku: offer.sku, grams: offer.grams || 'Special Offer',
        title: offer.title, price: offer.price, img: offer.img
      }));
    } else if (e.target.classList.contains('dec')) {
      window.changeCartQty && window.changeCartQty(key, cur - 1);
    }

    render();
  });

  window.addEventListener('cart-updated', render);
  render();
})();
</script>


<script>
(() => {
  const header   = document.querySelector('.yonutri-navbar') || document.querySelector('header');
  const drawer   = document.getElementById('shopDrawer');
  const openBtn  = document.getElementById('hamburgerBtn');
  const closeBtn = document.getElementById('closeShopDrawer');
  const overlay  = document.getElementById('overlay');
  const TRANS_MS = 320;

  function placeSheetUnderHeader(){
    const rect = header ? header.getBoundingClientRect() : { bottom: 0 };
    const top  = Math.max(0, rect.bottom) + 8; // 8px gap
    drawer.style.setProperty('--sheet-top', `${top}px`);
  }

  function open() {
    placeSheetUnderHeader();
    drawer.classList.add('open');
    overlay.classList.add('show');
    drawer.setAttribute('aria-hidden','false');
    overlay.setAttribute('aria-hidden','false');
    document.documentElement.classList.add('modal-open');
    document.body.classList.add('modal-open');
    (closeBtn || drawer).focus();
    openBtn?.setAttribute('aria-expanded','true');
  }

  function close() {
    // return focus FIRST to avoid aria-hidden warning
    openBtn?.focus();

    drawer.classList.remove('open');
    overlay.classList.remove('show');
    openBtn?.setAttribute('aria-expanded','false');
    document.documentElement.classList.remove('modal-open');
    document.body.classList.remove('modal-open');

    setTimeout(() => {
      drawer.setAttribute('aria-hidden','true');
      overlay.setAttribute('aria-hidden','true');
    }, TRANS_MS);
  }

  // events
  openBtn?.addEventListener('click', open);
  closeBtn?.addEventListener('click', close);
  overlay?.addEventListener('click', close);
  window.addEventListener('keydown', e => { if (e.key === 'Escape' && drawer.classList.contains('open')) close(); });

  // keep the sheet glued under the header on rotate/resize/scroll
  ['resize','orientationchange','scroll'].forEach(evt => window.addEventListener(evt, () => {
    if (drawer.classList.contains('open')) placeSheetUnderHeader();
  }));

  // close when tapping in-page anchors
  drawer.addEventListener('click', (e) => {
    const a = e.target.closest('a.category-item');
    if (a && (a.getAttribute('href')||'').startsWith('#')) close();
  });
})();
</script>

</body>
</html>
